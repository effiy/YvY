# 原始URL: https://github.com/hanxi/xiaomusic

# 抓取时间: 2025-03-30 21:19:11

[Skip to content](https://github.com/hanxi/xiaomusic#start-of-content)
## Navigation Menu
Toggle navigation
[ ](https://github.com/)
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fhanxi%2Fxiaomusic)
  * Product 
    * [ GitHub Copilot Write better code with AI  ](https://github.com/features/copilot)
    * [ Security Find and fix vulnerabilities  ](https://github.com/features/security)
    * [ Actions Automate any workflow  ](https://github.com/features/actions)
    * [ Codespaces Instant dev environments  ](https://github.com/features/codespaces)
    * [ Issues Plan and track work  ](https://github.com/features/issues)
    * [ Code Review Manage code changes  ](https://github.com/features/code-review)
    * [ Discussions Collaborate outside of code  ](https://github.com/features/discussions)
    * [ Code Search Find more, search less  ](https://github.com/features/code-search)
Explore
    * [ All features ](https://github.com/features)
    * [ Documentation ](https://docs.github.com)
    * [ GitHub Skills ](https://skills.github.com)
    * [ Blog ](https://github.blog)
  * Solutions 
By company size
    * [ Enterprises ](https://github.com/enterprise)
    * [ Small and medium teams ](https://github.com/team)
    * [ Startups ](https://github.com/enterprise/startups)
    * [ Nonprofits ](https://github.com/solutions/industry/nonprofits)
By use case
    * [ DevSecOps ](https://github.com/solutions/use-case/devsecops)
    * [ DevOps ](https://github.com/solutions/use-case/devops)
    * [ CI/CD ](https://github.com/solutions/use-case/ci-cd)
    * [ View all use cases ](https://github.com/solutions/use-case)
By industry
    * [ Healthcare ](https://github.com/solutions/industry/healthcare)
    * [ Financial services ](https://github.com/solutions/industry/financial-services)
    * [ Manufacturing ](https://github.com/solutions/industry/manufacturing)
    * [ Government ](https://github.com/solutions/industry/government)
    * [ View all industries ](https://github.com/solutions/industry)
[ View all solutions ](https://github.com/solutions)
  * Resources 
Topics
    * [ AI ](https://github.com/resources/articles/ai)
    * [ DevOps ](https://github.com/resources/articles/devops)
    * [ Security ](https://github.com/resources/articles/security)
    * [ Software Development ](https://github.com/resources/articles/software-development)
    * [ View all ](https://github.com/resources/articles)
Explore
    * [ Learning Pathways ](https://resources.github.com/learn/pathways)
    * [ Events & Webinars ](https://resources.github.com)
    * [ Ebooks & Whitepapers ](https://github.com/resources/whitepapers)
    * [ Customer Stories ](https://github.com/customer-stories)
    * [ Partners ](https://partner.github.com)
    * [ Executive Insights ](https://github.com/solutions/executive-insights)
  * Open Source 
    * [ GitHub Sponsors Fund open source developers  ](https://github.com/sponsors)
    * [ The ReadME Project GitHub community articles  ](https://github.com/readme)
Repositories
    * [ Topics ](https://github.com/topics)
    * [ Trending ](https://github.com/trending)
    * [ Collections ](https://github.com/collections)
  * Enterprise 
    * [ Enterprise platform AI-powered developer platform  ](https://github.com/enterprise)
Available add-ons
    * [ Advanced Security Enterprise-grade security features  ](https://github.com/enterprise/advanced-security)
    * [ Copilot for business Enterprise-grade AI features  ](https://github.com/features/copilot/copilot-business)
    * [ Premium Support Enterprise-grade 24/7 support  ](https://github.com/premium-support)
  * [Pricing](https://github.com/pricing)


Search or jump to...
# Search code, repositories, users, issues, pull requests...
Search 
Clear
[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)
#  Provide feedback 
We read every piece of feedback, and take your input very seriously.
Include my email address so I can be contacted
Cancel  Submit feedback 
#  Saved searches 
## Use saved searches to filter your results more quickly
Name
Query
To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 
Cancel  Create saved search 
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fhanxi%2Fxiaomusic)
[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=hanxi%2Fxiaomusic) Reseting focus
You signed in with another tab or window. [Reload](https://github.com/hanxi/xiaomusic) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/hanxi/xiaomusic) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/hanxi/xiaomusic) to refresh your session. Dismiss alert
{{ message }}
[ hanxi ](https://github.com/hanxi) / **[xiaomusic](https://github.com/hanxi/xiaomusic) ** Public
  * [ Notifications ](https://github.com/login?return_to=%2Fhanxi%2Fxiaomusic) You must be signed in to change notification settings
  * [ Fork 391 ](https://github.com/login?return_to=%2Fhanxi%2Fxiaomusic)
  * [ Star  3.3k ](https://github.com/login?return_to=%2Fhanxi%2Fxiaomusic)


使用小爱音箱播放音乐，音乐使用 yt-dlp 下载。 
[xdocs.hanxi.cc/](http://xdocs.hanxi.cc/ "http://xdocs.hanxi.cc/")
### License
[ MIT license ](https://github.com/hanxi/xiaomusic/blob/main/LICENSE)
[ 3.3k stars ](https://github.com/hanxi/xiaomusic/stargazers) [ 391 forks ](https://github.com/hanxi/xiaomusic/forks) [ Branches ](https://github.com/hanxi/xiaomusic/branches) [ Tags ](https://github.com/hanxi/xiaomusic/tags) [ Activity ](https://github.com/hanxi/xiaomusic/activity)
[ Star  ](https://github.com/login?return_to=%2Fhanxi%2Fxiaomusic)
[ Notifications ](https://github.com/login?return_to=%2Fhanxi%2Fxiaomusic) You must be signed in to change notification settings
  * [ Code ](https://github.com/hanxi/xiaomusic)
  * [ Issues 79 ](https://github.com/hanxi/xiaomusic/issues)
  * [ Pull requests 0 ](https://github.com/hanxi/xiaomusic/pulls)
  * [ Actions ](https://github.com/hanxi/xiaomusic/actions)
  * [ Security ](https://github.com/hanxi/xiaomusic/security)
  * [ Insights ](https://github.com/hanxi/xiaomusic/pulse)


Additional navigation options
  * [ Code  ](https://github.com/hanxi/xiaomusic)
  * [ Issues  ](https://github.com/hanxi/xiaomusic/issues)
  * [ Pull requests  ](https://github.com/hanxi/xiaomusic/pulls)
  * [ Actions  ](https://github.com/hanxi/xiaomusic/actions)
  * [ Security  ](https://github.com/hanxi/xiaomusic/security)
  * [ Insights  ](https://github.com/hanxi/xiaomusic/pulse)


# hanxi/xiaomusic
main
[Branches](https://github.com/hanxi/xiaomusic/branches)[Tags](https://github.com/hanxi/xiaomusic/tags)
[](https://github.com/hanxi/xiaomusic/branches)[](https://github.com/hanxi/xiaomusic/tags)
Go to file
Code
## Folders and files
Name| Name| Last commit message| Last commit date  
---|---|---|---  
## Latest commit
## History
[1,201 Commits](https://github.com/hanxi/xiaomusic/commits/main/)[](https://github.com/hanxi/xiaomusic/commits/main/)  
[.github](https://github.com/hanxi/xiaomusic/tree/main/.github ".github")| [.github](https://github.com/hanxi/xiaomusic/tree/main/.github ".github")  
[docs](https://github.com/hanxi/xiaomusic/tree/main/docs "docs")| [docs](https://github.com/hanxi/xiaomusic/tree/main/docs "docs")  
[plugins](https://github.com/hanxi/xiaomusic/tree/main/plugins "plugins")| [plugins](https://github.com/hanxi/xiaomusic/tree/main/plugins "plugins")  
[test](https://github.com/hanxi/xiaomusic/tree/main/test "test")| [test](https://github.com/hanxi/xiaomusic/tree/main/test "test")  
[xiaomusic](https://github.com/hanxi/xiaomusic/tree/main/xiaomusic "xiaomusic")| [xiaomusic](https://github.com/hanxi/xiaomusic/tree/main/xiaomusic "xiaomusic")  
[.gitattributes](https://github.com/hanxi/xiaomusic/blob/main/.gitattributes ".gitattributes")| [.gitattributes](https://github.com/hanxi/xiaomusic/blob/main/.gitattributes ".gitattributes")  
[.gitignore](https://github.com/hanxi/xiaomusic/blob/main/.gitignore ".gitignore")| [.gitignore](https://github.com/hanxi/xiaomusic/blob/main/.gitignore ".gitignore")  
[.pre-commit-config.yaml](https://github.com/hanxi/xiaomusic/blob/main/.pre-commit-config.yaml ".pre-commit-config.yaml")| [.pre-commit-config.yaml](https://github.com/hanxi/xiaomusic/blob/main/.pre-commit-config.yaml ".pre-commit-config.yaml")  
[CHANGELOG.md](https://github.com/hanxi/xiaomusic/blob/main/CHANGELOG.md "CHANGELOG.md")| [CHANGELOG.md](https://github.com/hanxi/xiaomusic/blob/main/CHANGELOG.md "CHANGELOG.md")  
[Dockerfile](https://github.com/hanxi/xiaomusic/blob/main/Dockerfile "Dockerfile")| [Dockerfile](https://github.com/hanxi/xiaomusic/blob/main/Dockerfile "Dockerfile")  
[Dockerfile.builder](https://github.com/hanxi/xiaomusic/blob/main/Dockerfile.builder "Dockerfile.builder")| [Dockerfile.builder](https://github.com/hanxi/xiaomusic/blob/main/Dockerfile.builder "Dockerfile.builder")  
[Dockerfile.runtime](https://github.com/hanxi/xiaomusic/blob/main/Dockerfile.runtime "Dockerfile.runtime")| [Dockerfile.runtime](https://github.com/hanxi/xiaomusic/blob/main/Dockerfile.runtime "Dockerfile.runtime")  
[LICENSE](https://github.com/hanxi/xiaomusic/blob/main/LICENSE "LICENSE")| [LICENSE](https://github.com/hanxi/xiaomusic/blob/main/LICENSE "LICENSE")  
[README.md](https://github.com/hanxi/xiaomusic/blob/main/README.md "README.md")| [README.md](https://github.com/hanxi/xiaomusic/blob/main/README.md "README.md")  
[config-example.json](https://github.com/hanxi/xiaomusic/blob/main/config-example.json "config-example.json")| [config-example.json](https://github.com/hanxi/xiaomusic/blob/main/config-example.json "config-example.json")  
[get_release.py](https://github.com/hanxi/xiaomusic/blob/main/get_release.py "get_release.py")| [get_release.py](https://github.com/hanxi/xiaomusic/blob/main/get_release.py "get_release.py")  
[install_dependencies.sh](https://github.com/hanxi/xiaomusic/blob/main/install_dependencies.sh "install_dependencies.sh")| [install_dependencies.sh](https://github.com/hanxi/xiaomusic/blob/main/install_dependencies.sh "install_dependencies.sh")  
[newpatch.sh](https://github.com/hanxi/xiaomusic/blob/main/newpatch.sh "newpatch.sh")| [newpatch.sh](https://github.com/hanxi/xiaomusic/blob/main/newpatch.sh "newpatch.sh")  
[newversion.sh](https://github.com/hanxi/xiaomusic/blob/main/newversion.sh "newversion.sh")| [newversion.sh](https://github.com/hanxi/xiaomusic/blob/main/newversion.sh "newversion.sh")  
[pyproject.toml](https://github.com/hanxi/xiaomusic/blob/main/pyproject.toml "pyproject.toml")| [pyproject.toml](https://github.com/hanxi/xiaomusic/blob/main/pyproject.toml "pyproject.toml")  
[supervisord.conf](https://github.com/hanxi/xiaomusic/blob/main/supervisord.conf "supervisord.conf")| [supervisord.conf](https://github.com/hanxi/xiaomusic/blob/main/supervisord.conf "supervisord.conf")  
[update-static-version.py](https://github.com/hanxi/xiaomusic/blob/main/update-static-version.py "update-static-version.py")| [update-static-version.py](https://github.com/hanxi/xiaomusic/blob/main/update-static-version.py "update-static-version.py")  
[xiaomusic.py](https://github.com/hanxi/xiaomusic/blob/main/xiaomusic.py "xiaomusic.py")| [xiaomusic.py](https://github.com/hanxi/xiaomusic/blob/main/xiaomusic.py "xiaomusic.py")  
View all files  
## Repository files navigation
  * [README](https://github.com/hanxi/xiaomusic)
  * [MIT license](https://github.com/hanxi/xiaomusic)


# XiaoMusic: 无限听歌，解放小爱音箱
[](https://github.com/hanxi/xiaomusic#xiaomusic-无限听歌解放小爱音箱)
[![GitHub License](https://camo.githubusercontent.com/2562de1161af9f908905b2965f2add57e7282ec3d8dc29bf22d2731e2669547c/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f6c6963656e73652f68616e78692f7869616f6d75736963)](https://github.com/hanxi/xiaomusic) [![Docker Image Version](https://camo.githubusercontent.com/7de5e9ab5c87fa8ef1d78c1e39d6e5cd3bb435e6f493d33e9d703c0367330e80/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f762f68616e78692f7869616f6d757369633f736f72743d73656d766572266c6162656c3d646f636b6572253230696d616765)](https://hub.docker.com/r/hanxi/xiaomusic) [![Docker Pulls](https://camo.githubusercontent.com/44004c2c6fba5e7ee4a1adb3c4071d0b8d8504d2b0ab0d3865edd2e6ea97906f/68747470733a2f2f696d672e736869656c64732e696f2f646f636b65722f70756c6c732f68616e78692f7869616f6d75736963)](https://hub.docker.com/r/hanxi/xiaomusic) [![PyPI - Version](https://camo.githubusercontent.com/5f9ed97cbaed6878d529bc625ac9ddc64a4e9ab344bb6bdc1e008a7af7867685/68747470733a2f2f696d672e736869656c64732e696f2f707970692f762f7869616f6d75736963)](https://pypi.org/project/xiaomusic/) [![PyPI - Downloads](https://camo.githubusercontent.com/fc21e86dbc6bcb0a1aea26433d925ec22818b7fc3e601d95c23919a2cbfe530e/68747470733a2f2f696d672e736869656c64732e696f2f707970692f646d2f7869616f6d75736963)](https://pypi.org/project/xiaomusic/) [![Python Version from PEP 621 TOML](https://camo.githubusercontent.com/1320943ebc51bc067fbbdf8248a5007fdb1cda92822f3f5dccf4f75774959d38/68747470733a2f2f696d672e736869656c64732e696f2f707974686f6e2f72657175697265642d76657273696f6e2d746f6d6c3f746f6d6c46696c65506174683d68747470732533412532462532467261772e67697468756275736572636f6e74656e742e636f6d25324668616e78692532467869616f6d757369632532466d61696e253246707970726f6a6563742e746f6d6c)](https://pypi.org/project/xiaomusic/) [![GitHub Release](https://camo.githubusercontent.com/ce9280e6ed833b9a18b7a8018153a4ae02841fffed000f53e48e106a9bfffc24/68747470733a2f2f696d672e736869656c64732e696f2f6769746875622f762f72656c656173652f68616e78692f7869616f6d75736963)](https://github.com/hanxi/xiaomusic/releases) [![Visitors](https://camo.githubusercontent.com/47b76bcc6ac1e899bf06c4672b1808ccbc706ddd3829771d39070a0acfbfd456/68747470733a2f2f6170692e76697369746f7262616467652e696f2f6170692f6461696c793f706174683d68616e78692532467869616f6d75736963266c6162656c3d6461696c7925323076697369746f7226636f756e74436f6c6f723d253233326363636534267374796c653d666c6174)](https://visitorbadge.io/status?path=hanxi%2Fxiaomusic) [![Visitors](https://camo.githubusercontent.com/0e7e171622cad4dbff39ffbffe4abb74234889109d548c36322a7a4788ff0af8/68747470733a2f2f6170692e76697369746f7262616467652e696f2f6170692f76697369746f72733f706174683d68616e78692532467869616f6d75736963266c6162656c3d746f74616c25323076697369746f7226636f756e74436f6c6f723d253233326363636534267374796c653d666c6174)](https://visitorbadge.io/status?path=hanxi%2Fxiaomusic)
使用小爱音箱播放音乐，音乐使用 yt-dlp 下载。
<https://github.com/hanxi/xiaomusic>
文档: <https://xdocs.hanxi.cc/>
Tip
初次安装遇到问题请查阅 [💬 FAQ问题集合](https://github.com/hanxi/xiaomusic/issues/99) ，一般遇到的问题都已经有解决办法。
## 👋 最简配置运行
[](https://github.com/hanxi/xiaomusic#-最简配置运行)
已经支持在 web 页面配置其他参数，docker 启动命令如下:
```
docker run -p 58090:8090 -e XIAOMUSIC_PUBLIC_PORT=58090 -v /xiaomusic_music:/app/music -v /xiaomusic_conf:/app/conf hanxi/xiaomusic
```

🔥 国内：
```
docker run -p 58090:8090 -e XIAOMUSIC_PUBLIC_PORT=58090 -v /xiaomusic_music:/app/music -v /xiaomusic_conf:/app/conf docker.hanxi.cc/hanxi/xiaomusic
```

对应的 docker compose 配置如下：
```
services:
 xiaomusic:
  image: hanxi/xiaomusic
  container_name: xiaomusic
  restart: unless-stopped
  ports:
   - 58090:8090
  environment:
   XIAOMUSIC_PUBLIC_PORT: 58090
  volumes:
   - /xiaomusic_music:/app/music
   - /xiaomusic_conf:/app/conf
```

🔥 国内：
```
services:
 xiaomusic:
  image: docker.hanxi.cc/hanxi/xiaomusic
  container_name: xiaomusic
  restart: unless-stopped
  ports:
   - 58090:8090
  environment:
   XIAOMUSIC_PUBLIC_PORT: 58090
  volumes:
   - /xiaomusic_music:/app/music
   - /xiaomusic_conf:/app/conf
```

  * 其中 conf 目录为配置文件存放目录，music 目录为音乐存放目录，建议分开配置为不同的目录。
  * /xiaomusic_music 和 /xiaomusic_conf 是 docker 所在的主机的目录，可以修改为其他目录。如果报错找不到 /xiaomusic_music 目录，可以先执行 `mkdir -p /xiaomusic_{music,conf}` 命令新建目录。
  * /app/music 和 /app/conf 是 docker 容器里的目录，不要去修改。
  * XIAOMUSIC_PUBLIC_PORT 是用来配置 NAS 本地端口的。8090 是容器端口，不要去修改。
  * 后台访问地址为： http://NAS_IP:58090


Note
docker 和 docker compose 二选一即可，启动成功后，在 web 页面可以配置其他参数，带有 `*` 号的配置是必须要配置的，其他的用不上时不用修改。初次配置时需要在页面上输入小米账号和密码保存后才能获取到设备列表。
Tip
目前安装步骤已经是最简化了，如果还是嫌安装麻烦，可以微信或者 QQ 约我远程安装，我一般周末和晚上才有时间，收个辛苦费 💰 50 元一次，安装失败不收费。
遇到问题可以去 web 设置页面底部点击【下载日志文件】按钮，然后搜索一下日志文件内容确保里面没有账号密码信息后(有就删除这些敏感信息)，然后在提 issues 反馈问题时把下载的日志文件带上。
Tip
  * 🔥【广告:可用于安装 frp 实现内网穿透】
  * 🔥 海外 RackNerd VPS 机器推荐，可支付宝付款。
  * [![RackNerd Mobile Leaderboard Banner](https://camo.githubusercontent.com/c37f155860085afe896d5eb327b1589f6cb8fb1105f50f2ea4fa8283d95be146/68747470733a2f2f7261636b6e6572642e636f6d2f62616e6e6572732f3332307835302e676966)](https://my.racknerd.com/aff.php?aff=11177)
  * 不知道选哪个套餐可以直接买这个最便宜的 [https://my.racknerd.com/aff.php?aff=11177&pid=903](https://my.racknerd.com/aff.php?aff=11177&pid=903)
  * 也可以用来部署代理，docker 部署方法见 [hanxi/blog#96](https://github.com/hanxi/blog/issues/96)


Tip
  * 🔥【广告: 搭建您的专属大模型主页 告别繁琐配置难题，一键即可畅享稳定流畅的AI体验！】<https://university.aliyun.com/mobile?userCode=szqvatm6>


### 🤐 支持语音口令
[](https://github.com/hanxi/xiaomusic#-支持语音口令)
  * 【播放歌曲】，播放本地的歌曲
  * 【播放歌曲+歌名】，比如：播放歌曲周杰伦晴天
  * 【上一首】
  * 【下一首】
  * 【单曲循环】
  * 【全部循环】
  * 【随机播放】
  * 【关机】，【停止播放】，两个效果是一样的。
  * 【刷新列表】，当复制了歌曲进 music 目录后，可以用这个口令刷新歌单。
  * 【播放列表+列表名】，比如：播放列表其他。
  * 【加入收藏】，把当前播放的歌曲加入收藏歌单。
  * 【取消收藏】，把当前播放的歌曲从收藏歌单里移除。
  * 【播放列表收藏】，这个用于播放收藏歌单。
  * 【播放本地歌曲+歌名】，这个口令和播放歌曲的区别是本地找不到也不会去下载。
  * 【播放列表第几个+列表名】，具体见： [#158](https://github.com/hanxi/xiaomusic/issues/158)
  * 【搜索播放+关键词】，会搜索关键词作为临时搜索列表播放，比如说【搜索播放林俊杰】，会播放所有林俊杰的歌。
  * 【本地搜索播放+关键词】，跟搜索播放的区别是本地找不到也不会去下载。


Tip
隐藏玩法: 对小爱同学说播放歌曲小猪佩奇的故事，会先下载小猪佩奇的故事，然后再播放小猪佩奇的故事。
## 🛠️ pip 方式安装运行
[](https://github.com/hanxi/xiaomusic#️-pip-方式安装运行)
```
> pip install -U xiaomusic
> xiaomusic --help
 __ __ _          __ __         _
 \ \/ / (_)  __ _  ___  | \/ | _  _  ___ (_)  ___
 \  / | | / _` | / _ \  | |\/| | | | | | / __| | | / __|
 / \  | | | (_| | | (_) | | | | | | |_| | \__ \ | | | (__
 /_/\_\ |_| \__,_| \___/ |_| |_| \__,_| |___/ |_| \___|
     XiaoMusic v0.3.69 by: github.com/hanxi
usage: xiaomusic [-h] [--port PORT] [--hardware HARDWARE] [--account ACCOUNT]
         [--password PASSWORD] [--cookie COOKIE] [--verbose]
         [--config CONFIG] [--ffmpeg_location FFMPEG_LOCATION]
options:
 -h, --help      show this help message and exit
 --port PORT      监听端口
 --hardware HARDWARE  小爱音箱型号
 --account ACCOUNT   xiaomi account
 --password PASSWORD  xiaomi password
 --cookie COOKIE    xiaomi cookie
 --verbose       show info
 --config CONFIG    config file path
 --ffmpeg_location FFMPEG_LOCATION
            ffmpeg bin path
> xiaomusic --config config.json
```

其中 `config.json` 文件可以参考 `config-example.json` 文件配置。见 [#94](https://github.com/hanxi/xiaomusic/issues/94)
不修改默认端口 8090 的情况下，只需要执行 `xiaomusic` 即可启动。
## 🔩 开发环境运行
[](https://github.com/hanxi/xiaomusic#-开发环境运行)
  * 使用 install_dependencies.sh 下载依赖
  * 使用 pdm 安装环境
  * 默认监听了端口 8090 , 使用其他端口自行修改。


```
pdm run xiaomusic.py
```

如果是开发前端界面，可以通过 <http://localhost:8090/docs> 查看有什么接口。目前的 web 控制台非常简陋，欢迎有兴趣的朋友帮忙实现一个漂亮的前端，需要什么接口可以随时提需求。
### 🚦 代码提交规范
[](https://github.com/hanxi/xiaomusic#-代码提交规范)
提交前请执行
```
pdm lintfmt

```

用于检查代码和格式化代码。
### 本地编译 Docker Image
[](https://github.com/hanxi/xiaomusic#本地编译-docker-image)
```
docker build -t xiaomusic .
```

### 技术栈
[](https://github.com/hanxi/xiaomusic#技术栈)
  * 后端代码使用 Python 语言编写。
  * HTTP 服务使用的是 FastAPI 框架，~~早期版本使用的是 Flask~~ 。
  * 使用了 Docker ，在 NAS 上安装更方便。
  * 默认的前端主题使用了 jQuery 。


## 已测试支持的设备
[](https://github.com/hanxi/xiaomusic#已测试支持的设备)
型号 | 名称  
---|---  
L06A | [小爱音箱](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l06a)  
L07A | [Redmi小爱音箱 Play](https://home.mi.com/webapp/content/baike/product/index.html?model=xiaomi.wifispeaker.l7a)  
S12/S12A/MDZ-25-DA | [小米AI音箱](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.s12)  
LX5A | [小爱音箱 万能遥控版](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.lx5a)  
LX05 | [小爱音箱Play（2019款）](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.lx05)  
L15A | [小米AI音箱（第二代）](https://home.mi.com/webapp/content/baike/product/index.html?model=xiaomi.wifispeaker.l15a#/)  
L16A | [Xiaomi Sound](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l16a)  
L17A | [Xiaomi Sound Pro](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l17a)  
LX06 | [小爱音箱Pro](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.lx06)  
LX01 | [小爱音箱mini](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.lx01)  
L05B | [小爱音箱Play](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l05b)  
L05C | [小米小爱音箱Play 增强版](https://home.mi.com/baike/index.html#/detail?model=xiaomi.wifispeaker.l05c)  
L09A | [小米音箱Art](https://home.mi.com/webapp/content/baike/product/index.html?model=xiaomi.wifispeaker.l09a)  
LX04 X10A X08A | 已经支持的触屏版  
X08C X08E X8F | 需要设置【型号兼容模式】选项为 true  
M01/XMYX01JY | 小米小爱音箱HD 需要设置【特殊型号获取对话记录】选项为 true 才能语音播放  
OH2P | XIAOMI 智能音箱 Pro  
型号与产品名称对照可以在这里查询 <https://home.miot-spec.com/s/xiaomi.wifispeaker>
Note
如果你的设备支持播放，请反馈给我添加到支持列表里，谢谢。 目前应该所有设备类型都已经支持播放，有问题随时反馈。 其他触屏版不能播放可以设置【型号兼容模式】选项为 true 试试。见 [#30](https://github.com/hanxi/xiaomusic/issues/30)
## 🎵 支持音乐格式
[](https://github.com/hanxi/xiaomusic#-支持音乐格式)
  * mp3
  * flac
  * wav
  * ape
  * ogg
  * m4a


Note
本地音乐会搜索目录下上面格式的文件，下载的歌曲是 mp3 格式的。 已知 L05B L05C LX06 L16A 不支持 flac 格式。 如果格式不能播放可以打开【转换为MP3】和【型号兼容模式】选项。具体见 [#153 (comment)](https://github.com/hanxi/xiaomusic/issues/153#issuecomment-2328168689)
## 🌏 网络歌单功能
[](https://github.com/hanxi/xiaomusic#-网络歌单功能)
可以配置一个 json 格式的歌单，支持电台和歌曲，也可以直接用别人分享的链接，同时配备了 m3u 文件格式转换工具，可以很方便的把 m3u 电台文件转换成网络歌单格式的 json 文件，具体用法见 [#78](https://github.com/hanxi/xiaomusic/issues/78)
Note
欢迎有想法的朋友们制作更多的歌单转换工具。
## 🍺 更多其他可选配置
[](https://github.com/hanxi/xiaomusic#-更多其他可选配置)
见 [#333](https://github.com/hanxi/xiaomusic/issues/333)
## ⚠️ 安全提醒
[](https://github.com/hanxi/xiaomusic#️-安全提醒)
Important
  1. 如果配置了公网访问 xiaomusic ，请一定要开启密码登陆，并设置复杂的密码。且不要在公共场所的 WiFi 环境下使用，否则可能造成小米账号密码泄露。
  2. 强烈不建议将小爱音箱的小米账号绑定摄像头，代码难免会有 bug ，一旦小米账号密码泄露，可能监控录像也会泄露。


## 🤔 高级篇
[](https://github.com/hanxi/xiaomusic#-高级篇)
  * 自定义口令功能 [#105](https://github.com/hanxi/xiaomusic/issues/105)
  * [#312](https://github.com/hanxi/xiaomusic/issues/312)
  * [#269](https://github.com/hanxi/xiaomusic/issues/269)
  * [#159](https://github.com/hanxi/xiaomusic/issues/159)


## 📢 讨论区
[](https://github.com/hanxi/xiaomusic#-讨论区)
  * [点击链接加入QQ频道【xiaomusic】](https://pd.qq.com/s/e2jybz0ss)
  * [点击链接加入群聊【满 xiaomusic官方交流群1(小爱音箱)】 604526973](http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=13St5PLVcTxYlWTAs_iAawazjtdD1l-a&authKey=dJWEpaT2fDBDpdUUOWj%2FLt6NS1ePBfShDfz7a6seNURi05VvVnAGQzXF%2FM%2F5HgIm&noverify=0&group_code=604526973)
  * [点击链接加入群聊【xiaomusic官方交流群2(小爱音箱)】1021062499](https://qm.qq.com/q/BmVNqhDL3M)
  * <https://github.com/hanxi/xiaomusic/issues>
  * [微信群二维码](https://github.com/hanxi/xiaomusic/issues/86)


## ❤️ 感谢
[](https://github.com/hanxi/xiaomusic#️-感谢)
  * [xiaomi](https://www.mi.com/)
  * [PDM](https://pdm.fming.dev/latest/)
  * [xiaogpt](https://github.com/yihong0618/xiaogpt)
  * [MiService](https://github.com/yihong0618/MiService)
  * [实现原理](https://github.com/yihong0618/gitblog/issues/258)
  * [yt-dlp](https://github.com/yt-dlp/yt-dlp)
  * [awesome-xiaoai](https://github.com/zzz6519003/awesome-xiaoai)
  * [微信小程序: 卯卯音乐](https://github.com/F-loat/xiaoplayer)
  * [pure 主题 xiaomusicUI](https://github.com/52fisher/xiaomusicUI)
  * [移动端的播放器主题](https://github.com/52fisher/XMusicPlayer)
  * [Tailwind主题](https://github.com/clarencejh/xiaomusic)
  * [一个第三方的主题](https://github.com/DarrenWen/xiaomusicui)
  * [Umami 统计](https://github.com/umami-software/umami)
  * [Sentry 报错监控](https://github.com/getsentry/sentry)
  * 所有帮忙调试和测试的朋友
  * 所有反馈问题和建议的朋友


### 👉 其他教程
[](https://github.com/hanxi/xiaomusic#-其他教程)
更多功能见 [📝 文档汇总](https://github.com/hanxi/xiaomusic/issues/211)
## 🚨 免责声明
[](https://github.com/hanxi/xiaomusic#-免责声明)
本项目仅供学习和研究目的，不得用于任何商业活动。用户在使用本项目时应遵守所在地区的法律法规，对于违法使用所导致的后果，本项目及作者不承担任何责任。 本项目可能存在未知的缺陷和风险（包括但不限于设备损坏和账号封禁等），使用者应自行承担使用本项目所产生的所有风险及责任。 作者不保证本项目的准确性、完整性、及时性、可靠性，也不承担任何因使用本项目而产生的任何损失或损害责任。 使用本项目即表示您已阅读并同意本免责声明的全部内容。
## Star History
[](https://github.com/hanxi/xiaomusic#star-history)
[![Star History Chart](https://camo.githubusercontent.com/2b4003cd0808f467f1d379ded9e40f9f3b5c7bebf410d44237d1d0e9bab8872d/68747470733a2f2f6170692e737461722d686973746f72792e636f6d2f7376673f7265706f733d68616e78692f7869616f6d7573696326747970653d44617465)](https://star-history.com/#hanxi/xiaomusic&Date)
## 赞赏
[](https://github.com/hanxi/xiaomusic#赞赏)
  * 💰 爱发电 <https://afdian.com/a/imhanxi>
  * 点个 Star ⭐
  * 谢谢 ❤️
  * [![喝杯奶茶](https://camo.githubusercontent.com/a32c3b08045dc077a3cc2f37b9b0586380679197196a56ad768303cfb6ad9945/68747470733a2f2f692e763265782e636f2f3751303361784f356c2e706e67)](https://camo.githubusercontent.com/a32c3b08045dc077a3cc2f37b9b0586380679197196a56ad768303cfb6ad9945/68747470733a2f2f692e763265782e636f2f3751303361784f356c2e706e67)


## License
[](https://github.com/hanxi/xiaomusic#license)
[MIT](https://github.com/hanxi/xiaomusic/blob/main/LICENSE) License © 2024 涵曦
## About
使用小爱音箱播放音乐，音乐使用 yt-dlp 下载。 
[xdocs.hanxi.cc/](http://xdocs.hanxi.cc/ "http://xdocs.hanxi.cc/")
### Topics
[ music ](https://github.com/topics/music "Topic: music") [ xiaomi ](https://github.com/topics/xiaomi "Topic: xiaomi") [ xiaoai ](https://github.com/topics/xiaoai "Topic: xiaoai") [ xiaoai-speaker ](https://github.com/topics/xiaoai-speaker "Topic: xiaoai-speaker") [ xiaomusic ](https://github.com/topics/xiaomusic "Topic: xiaomusic")
### Resources
[ Readme ](https://github.com/hanxi/xiaomusic#readme-ov-file)
### License
[ MIT license ](https://github.com/hanxi/xiaomusic#MIT-1-ov-file)
[ Activity](https://github.com/hanxi/xiaomusic/activity)
### Stars
[ **3.3k** stars](https://github.com/hanxi/xiaomusic/stargazers)
### Watchers
[ **15** watching](https://github.com/hanxi/xiaomusic/watchers)
### Forks
[ **391** forks](https://github.com/hanxi/xiaomusic/forks)
[ Report repository ](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fhanxi%2Fxiaomusic&report=hanxi+%28user%29)
##  [Releases 174](https://github.com/hanxi/xiaomusic/releases)
[ v0.3.77 Latest  Mar 12, 2025 ](https://github.com/hanxi/xiaomusic/releases/tag/v0.3.77)
[+ 173 releases](https://github.com/hanxi/xiaomusic/releases)
## Sponsor this project
  * <https://afdian.com/a/imhanxi>


##  [Packages 0](https://github.com/users/hanxi/packages?repo_name=xiaomusic)
No packages published 
##  [Contributors 21](https://github.com/hanxi/xiaomusic/graphs/contributors)
  * [ ![@hanxi](https://avatars.githubusercontent.com/u/1185757?s=64&v=4) ](https://github.com/hanxi)
  * [ ![@github-actions\[bot\]](https://avatars.githubusercontent.com/in/15368?s=64&v=4) ](https://github.com/apps/github-actions)
  * [ ![@flymin](https://avatars.githubusercontent.com/u/28671430?s=64&v=4) ](https://github.com/flymin)
  * [ ![@52fisher](https://avatars.githubusercontent.com/u/32198215?s=64&v=4) ](https://github.com/52fisher)
  * [ ![@grayana](https://avatars.githubusercontent.com/u/55790859?s=64&v=4) ](https://github.com/grayana)
  * [ ![@clarencejh](https://avatars.githubusercontent.com/u/19381836?s=64&v=4) ](https://github.com/clarencejh)
  * [ ![@wjcroom](https://avatars.githubusercontent.com/u/111072?s=64&v=4) ](https://github.com/wjcroom)
  * [ ![@F-loat](https://avatars.githubusercontent.com/u/16759376?s=64&v=4) ](https://github.com/F-loat)
  * [ ![@github-advanced-security\[bot\]](https://avatars.githubusercontent.com/in/57789?s=64&v=4) ](https://github.com/apps/github-advanced-security)
  * [ ![@dzhuang](https://avatars.githubusercontent.com/u/7379654?s=64&v=4) ](https://github.com/dzhuang)
  * [ ![@AisukaYuki](https://avatars.githubusercontent.com/u/17586327?s=64&v=4) ](https://github.com/AisukaYuki)
  * [ ![@Blues-star](https://avatars.githubusercontent.com/u/29670586?s=64&v=4) ](https://github.com/Blues-star)
  * [ ![@lj3lj3](https://avatars.githubusercontent.com/u/2476642?s=64&v=4) ](https://github.com/lj3lj3)
  * [ ![@lv99](https://avatars.githubusercontent.com/u/3821765?s=64&v=4) ](https://github.com/lv99)


[+ 7 contributors](https://github.com/hanxi/xiaomusic/graphs/contributors)
## Languages
  * [ Python 98.6% ](https://github.com/hanxi/xiaomusic/search?l=python)
  * Other 1.4%


## Footer
[ ](https://github.com "GitHub") © 2025 GitHub, Inc. 
### Footer navigation
  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com/)
  * [Contact](https://support.github.com?tags=dotcom-footer)
  * Manage cookies 
  * Do not share my personal information 


You can’t perform that action at this time. 
