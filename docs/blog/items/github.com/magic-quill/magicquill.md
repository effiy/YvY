# 原始URL: https://github.com/magic-quill/magicquill

# 抓取时间: 2025-03-30 21:13:24

[Skip to content](https://github.com/magic-quill/magicquill#start-of-content)
## Navigation Menu
Toggle navigation
[ ](https://github.com/)
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fant-research%2FMagicQuill)
  * Product 
    * [ GitHub Copilot Write better code with AI  ](https://github.com/features/copilot)
    * [ Security Find and fix vulnerabilities  ](https://github.com/features/security)
    * [ Actions Automate any workflow  ](https://github.com/features/actions)
    * [ Codespaces Instant dev environments  ](https://github.com/features/codespaces)
    * [ Issues Plan and track work  ](https://github.com/features/issues)
    * [ Code Review Manage code changes  ](https://github.com/features/code-review)
    * [ Discussions Collaborate outside of code  ](https://github.com/features/discussions)
    * [ Code Search Find more, search less  ](https://github.com/features/code-search)
Explore
    * [ All features ](https://github.com/features)
    * [ Documentation ](https://docs.github.com)
    * [ GitHub Skills ](https://skills.github.com)
    * [ Blog ](https://github.blog)
  * Solutions 
By company size
    * [ Enterprises ](https://github.com/enterprise)
    * [ Small and medium teams ](https://github.com/team)
    * [ Startups ](https://github.com/enterprise/startups)
    * [ Nonprofits ](https://github.com/solutions/industry/nonprofits)
By use case
    * [ DevSecOps ](https://github.com/solutions/use-case/devsecops)
    * [ DevOps ](https://github.com/solutions/use-case/devops)
    * [ CI/CD ](https://github.com/solutions/use-case/ci-cd)
    * [ View all use cases ](https://github.com/solutions/use-case)
By industry
    * [ Healthcare ](https://github.com/solutions/industry/healthcare)
    * [ Financial services ](https://github.com/solutions/industry/financial-services)
    * [ Manufacturing ](https://github.com/solutions/industry/manufacturing)
    * [ Government ](https://github.com/solutions/industry/government)
    * [ View all industries ](https://github.com/solutions/industry)
[ View all solutions ](https://github.com/solutions)
  * Resources 
Topics
    * [ AI ](https://github.com/resources/articles/ai)
    * [ DevOps ](https://github.com/resources/articles/devops)
    * [ Security ](https://github.com/resources/articles/security)
    * [ Software Development ](https://github.com/resources/articles/software-development)
    * [ View all ](https://github.com/resources/articles)
Explore
    * [ Learning Pathways ](https://resources.github.com/learn/pathways)
    * [ Events & Webinars ](https://resources.github.com)
    * [ Ebooks & Whitepapers ](https://github.com/resources/whitepapers)
    * [ Customer Stories ](https://github.com/customer-stories)
    * [ Partners ](https://partner.github.com)
    * [ Executive Insights ](https://github.com/solutions/executive-insights)
  * Open Source 
    * [ GitHub Sponsors Fund open source developers  ](https://github.com/sponsors)
    * [ The ReadME Project GitHub community articles  ](https://github.com/readme)
Repositories
    * [ Topics ](https://github.com/topics)
    * [ Trending ](https://github.com/trending)
    * [ Collections ](https://github.com/collections)
  * Enterprise 
    * [ Enterprise platform AI-powered developer platform  ](https://github.com/enterprise)
Available add-ons
    * [ Advanced Security Enterprise-grade security features  ](https://github.com/enterprise/advanced-security)
    * [ Copilot for business Enterprise-grade AI features  ](https://github.com/features/copilot/copilot-business)
    * [ Premium Support Enterprise-grade 24/7 support  ](https://github.com/premium-support)
  * [Pricing](https://github.com/pricing)


Search or jump to...
# Search code, repositories, users, issues, pull requests...
Search 
Clear
[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)
#  Provide feedback 
We read every piece of feedback, and take your input very seriously.
Include my email address so I can be contacted
Cancel  Submit feedback 
#  Saved searches 
## Use saved searches to filter your results more quickly
Name
Query
To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 
Cancel  Create saved search 
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fant-research%2FMagicQuill)
[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=ant-research%2FMagicQuill) Reseting focus
You signed in with another tab or window. [Reload](https://github.com/magic-quill/magicquill) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/magic-quill/magicquill) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/magic-quill/magicquill) to refresh your session. Dismiss alert
{{ message }}
[ ant-research ](https://github.com/ant-research) / **[MagicQuill](https://github.com/ant-research/MagicQuill) ** Public
  * [ Notifications ](https://github.com/login?return_to=%2Fant-research%2FMagicQuill) You must be signed in to change notification settings
  * [ Fork 324 ](https://github.com/login?return_to=%2Fant-research%2FMagicQuill)
  * [ Star  3.2k ](https://github.com/login?return_to=%2Fant-research%2FMagicQuill)


[CVPR'25] Official Implementations for Paper - MagicQuill: An Intelligent Interactive Image Editing System 
[magicquill.art](https://magicquill.art "https://magicquill.art")
### License
[ View license ](https://github.com/ant-research/MagicQuill/blob/main/LICENSE)
[ 3.2k stars ](https://github.com/ant-research/MagicQuill/stargazers) [ 324 forks ](https://github.com/ant-research/MagicQuill/forks) [ Branches ](https://github.com/ant-research/MagicQuill/branches) [ Tags ](https://github.com/ant-research/MagicQuill/tags) [ Activity ](https://github.com/ant-research/MagicQuill/activity)
[ Star  ](https://github.com/login?return_to=%2Fant-research%2FMagicQuill)
[ Notifications ](https://github.com/login?return_to=%2Fant-research%2FMagicQuill) You must be signed in to change notification settings
  * [ Code ](https://github.com/ant-research/MagicQuill)
  * [ Issues 35 ](https://github.com/ant-research/MagicQuill/issues)
  * [ Pull requests 3 ](https://github.com/ant-research/MagicQuill/pulls)
  * [ Actions ](https://github.com/ant-research/MagicQuill/actions)
  * [ Projects 0 ](https://github.com/ant-research/MagicQuill/projects)
  * [ Security ](https://github.com/ant-research/MagicQuill/security)
  * [ Insights ](https://github.com/ant-research/MagicQuill/pulse)


Additional navigation options
  * [ Code  ](https://github.com/ant-research/MagicQuill)
  * [ Issues  ](https://github.com/ant-research/MagicQuill/issues)
  * [ Pull requests  ](https://github.com/ant-research/MagicQuill/pulls)
  * [ Actions  ](https://github.com/ant-research/MagicQuill/actions)
  * [ Projects  ](https://github.com/ant-research/MagicQuill/projects)
  * [ Security  ](https://github.com/ant-research/MagicQuill/security)
  * [ Insights  ](https://github.com/ant-research/MagicQuill/pulse)


# ant-research/MagicQuill
main
[Branches](https://github.com/ant-research/MagicQuill/branches)[Tags](https://github.com/ant-research/MagicQuill/tags)
[](https://github.com/ant-research/MagicQuill/branches)[](https://github.com/ant-research/MagicQuill/tags)
Go to file
Code
## Folders and files
Name| Name| Last commit message| Last commit date  
---|---|---|---  
## Latest commit
## History
[62 Commits](https://github.com/ant-research/MagicQuill/commits/main/)[](https://github.com/ant-research/MagicQuill/commits/main/)  
[.github/ISSUE_TEMPLATE](https://github.com/ant-research/MagicQuill/tree/main/.github/ISSUE_TEMPLATE "This path skips through empty directories")| [.github/ISSUE_TEMPLATE](https://github.com/ant-research/MagicQuill/tree/main/.github/ISSUE_TEMPLATE "This path skips through empty directories")  
[MagicQuill](https://github.com/ant-research/MagicQuill/tree/main/MagicQuill "MagicQuill")| [MagicQuill](https://github.com/ant-research/MagicQuill/tree/main/MagicQuill "MagicQuill")  
[docker](https://github.com/ant-research/MagicQuill/tree/main/docker "docker")| [docker](https://github.com/ant-research/MagicQuill/tree/main/docker "docker")  
[docs](https://github.com/ant-research/MagicQuill/tree/main/docs "docs")| [docs](https://github.com/ant-research/MagicQuill/tree/main/docs "docs")  
[.gitignore](https://github.com/ant-research/MagicQuill/blob/main/.gitignore ".gitignore")| [.gitignore](https://github.com/ant-research/MagicQuill/blob/main/.gitignore ".gitignore")  
[.gitmodules](https://github.com/ant-research/MagicQuill/blob/main/.gitmodules ".gitmodules")| [.gitmodules](https://github.com/ant-research/MagicQuill/blob/main/.gitmodules ".gitmodules")  
[Dockerfile](https://github.com/ant-research/MagicQuill/blob/main/Dockerfile "Dockerfile")| [Dockerfile](https://github.com/ant-research/MagicQuill/blob/main/Dockerfile "Dockerfile")  
[LICENSE](https://github.com/ant-research/MagicQuill/blob/main/LICENSE "LICENSE")| [LICENSE](https://github.com/ant-research/MagicQuill/blob/main/LICENSE "LICENSE")  
[README.md](https://github.com/ant-research/MagicQuill/blob/main/README.md "README.md")| [README.md](https://github.com/ant-research/MagicQuill/blob/main/README.md "README.md")  
[docker-compose.yaml](https://github.com/ant-research/MagicQuill/blob/main/docker-compose.yaml "docker-compose.yaml")| [docker-compose.yaml](https://github.com/ant-research/MagicQuill/blob/main/docker-compose.yaml "docker-compose.yaml")  
[gradio_magicquill-0.0.1-py3-none-any.whl](https://github.com/ant-research/MagicQuill/blob/main/gradio_magicquill-0.0.1-py3-none-any.whl "gradio_magicquill-0.0.1-py3-none-any.whl")| [gradio_magicquill-0.0.1-py3-none-any.whl](https://github.com/ant-research/MagicQuill/blob/main/gradio_magicquill-0.0.1-py3-none-any.whl "gradio_magicquill-0.0.1-py3-none-any.whl")  
[gradio_run.py](https://github.com/ant-research/MagicQuill/blob/main/gradio_run.py "gradio_run.py")| [gradio_run.py](https://github.com/ant-research/MagicQuill/blob/main/gradio_run.py "gradio_run.py")  
[linux_setup.sh](https://github.com/ant-research/MagicQuill/blob/main/linux_setup.sh "linux_setup.sh")| [linux_setup.sh](https://github.com/ant-research/MagicQuill/blob/main/linux_setup.sh "linux_setup.sh")  
[pyproject.toml](https://github.com/ant-research/MagicQuill/blob/main/pyproject.toml "pyproject.toml")| [pyproject.toml](https://github.com/ant-research/MagicQuill/blob/main/pyproject.toml "pyproject.toml")  
[requirements.txt](https://github.com/ant-research/MagicQuill/blob/main/requirements.txt "requirements.txt")| [requirements.txt](https://github.com/ant-research/MagicQuill/blob/main/requirements.txt "requirements.txt")  
[windows_setup.bat](https://github.com/ant-research/MagicQuill/blob/main/windows_setup.bat "windows_setup.bat")| [windows_setup.bat](https://github.com/ant-research/MagicQuill/blob/main/windows_setup.bat "windows_setup.bat")  
View all files  
## Repository files navigation
  * [README](https://github.com/magic-quill/magicquill)
  * [License](https://github.com/magic-quill/magicquill)


# 🪶 MagicQuill: An Intelligent Interactive Image Editing System
[](https://github.com/magic-quill/magicquill#-magicquill-an-intelligent-interactive-image-editing-system)
[![](https://camo.githubusercontent.com/c770b26f46fbd8103fe71c60af3caf7dc9a54aabbfb94c29139ad1fe9e436dfa/68747470733a2f2f696d672e736869656c64732e696f2f7374617469632f76313f6c6162656c3d50726f6a656374266d6573736167653d6d616769637175696c6c2e61727426636f6c6f723d626c7565)](https://magicquill.art/demo/) [![](https://camo.githubusercontent.com/c4b95ecf6c396119f1f2f592f5869d107cb1af7d420ce13ac7b92be57dfba7cb/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f61725869762d323431312e30393730332d6233316231622e737667)](https://arxiv.org/abs/2411.09703) [![](https://camo.githubusercontent.com/a6c2e59c845062569881a2318124c4dbda988b4178197ff45896573cd83516e9/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f25463025394625413425393725323048756767696e67253230466163652d5370616365732d626c756529)](https://huggingface.co/spaces/AI4Editing/MagicQuill) [![](https://camo.githubusercontent.com/8893a5ee2d7f73909733da3e88ef024aab2bb1fce0ada8155499b8db59b4d148/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f4c6963656e73652d434325323042592d2d5341253230342e302d6c69676874677265792e737667)](https://creativecommons.org/licenses/by-sa/4.0/)
demo480p.mp4
There is an HD video on [Youtube](https://www.youtube.com/watch?v=5DiKfONMnE4).
[Zichen Liu](https://zliucz.github.io)*,1,2, [Yue Yu](https://bruceyyu.github.io/)*,1,2, [Hao Ouyang](https://ken-ouyang.github.io/)2, [Qiuyu Wang](https://github.com/qiuyu96)2, [Ka Leong Cheng](https://felixcheng97.github.io/)1,2, [Wen Wang](https://github.com/encounter1997)3,2, [Zhiheng Liu](https://johanan528.github.io/)4, [Qifeng Chen](https://cqf.io/)†,1, [Yujun Shen](https://shenyujun.github.io/)†,2 1HKUST 2Ant Group 3ZJU 4HKU *equal contribution †corresponding author
> TLDR: MagicQuill is an intelligent and interactive system achieving precise image editing.
> Key Features: 😎 User-friendly interface / 🤖 AI-powered suggestions / 🎨 Precise local editing
  * [🪶 MagicQuill: An Intelligent Interactive Image Editing System](https://github.com/magic-quill/magicquill#-magicquill-an-intelligent-interactive-image-editing-system)
    * [TODO List](https://github.com/magic-quill/magicquill#todo-list)
    * [Update Log](https://github.com/magic-quill/magicquill#update-log)
    * [Hardware Requirements](https://github.com/magic-quill/magicquill#hardware-requirements)
    * [Docker Container](https://github.com/magic-quill/magicquill#docker-container)
    * [Setup](https://github.com/magic-quill/magicquill#setup)
    * [Tutorial](https://github.com/magic-quill/magicquill#tutorial)
    * [Citation](https://github.com/magic-quill/magicquill#citation)
    * [Acknowledgement](https://github.com/magic-quill/magicquill#acknowledgement)
    * [Note](https://github.com/magic-quill/magicquill#note)


## TODO List
[](https://github.com/magic-quill/magicquill#todo-list)
  * Release the paper and demo page. Visit [magicquill.art](https://magicquill.art) 🪩
  * Release the code and checkpoints.
  * Release gradio demo.
  * Release ComfyUI MagicQuill custom node.


[![](https://github.com/ant-research/MagicQuill/raw/main/docs/comfyui.png)](https://github.com/ant-research/MagicQuill/blob/main/docs/comfyui.png)
## Update Log
[](https://github.com/magic-quill/magicquill#update-log)
  * [2024.11.21] 📢 Update the save button; Fix path bug on Windows; Add `.bat` and `.sh` files for convenient environment install on Windows and Linux. Thanks [lior007](https://github.com/lior007) and [JamesIV4](https://github.com/JamesIV4).
  * [2024.11.25] 📢 New UI Updates: Drag & Drop Images + Download Button: We've enhanced our interface with two exciting features! Now you can easily upload images with drag & drop functionality, and quickly save your work using our new download button. Try it out and let us know what you think!
  * [2024.12.06] 📢 New Feature Updates: Auto-save and Resolution Adjustment are now enabled in the parameter settings. Thanks [Furkan Gözükara](https://github.com/FurkanGozukara) for his brilliant suggestions.
  * [2024.12.07] 🎉 Exciting News: ComfyUI MagicQuill Node has been released! Check the repository <https://github.com/magic-quill/ComfyUI_MagicQuill> for more details.
  * [2024.12.16] 🎉 Exciting News: MagicQuill is also available at [Modelscope](https://modelscope.cn/studios/ant-research/MagicQuill_demo). Thanks for their amazing support and infrastructure.
  * [2025.01.02] 🎉 Exciting News: MagicQuill docker container is now available. You can now build & run your own image in a cleaner, isolated environment. Thanks [gbudge](https://github.com/gbudge) for his contribution.
  * [2025.02.27] 🎉 Exciting News: MagicQuill has been accepted to CVPR 2025! Looking forward to meeting everyone in Tennessee!


To update the latest features, pull the latest code and re-install the gradio_magicquill:
```
pip uninstall -y gradio_magicquill-0.0.1-py3-none-any.whl
pip install gradio_magicquill-0.0.1-py3-none-any.whl

```

## Hardware Requirements
[](https://github.com/magic-quill/magicquill#hardware-requirements)
  * GPU is required to run MagicQuill. **Through our testing, we have confirmed that the model can run on GPUs with 8GB VRAM (RTX4070 Laptop).**


For users with limited GPU resources, please try our [Huggingface Demo](https://huggingface.co/spaces/AI4Editing/MagicQuill) and [Modelscope Demo](https://modelscope.cn/studios/ant-research/MagicQuill_demo). Also, consider disabling the DrawNGuess automatic prompt filling by clicking the wand icon above if it takes too long time on your machine.
## Setup
[](https://github.com/magic-quill/magicquill#setup)
Follow the following guide to set up the environment.
  1. git clone repo. **Please don't forget the`--recursive` flag.** Otherwise, you will find `LLaVA` submodule missing. 
```
git clone --recursive https://github.com/magic-quill/MagicQuill.git
cd MagicQuill

```

  2. download and unzip checkpoints 
```
wget -O models.zip "https://hkustconnect-my.sharepoint.com/:u:/g/personal/zliucz_connect_ust_hk/EWlGF0WfawJIrJ1Hn85_-3gB0MtwImAnYeWXuleVQcukMg?e=Gcjugg&download=1"
unzip models.zip

```

If the .zip file is not accessible, download it via browser. All checkpoints are about 25 GB in total. It may take some time to download. Alternatively, check our checkpoints at [huggingface](https://huggingface.co/LiuZichen/MagicQuill-models).


If you are a Windows user, you may try to use `windows_setup.bat` to conveniently install environments, just enter `windows_setup.bat` in your Python shell. For Linux user, check `linux_setup.sh`.
Alternatively, follow the step-by-step installation guide.
  1. create environment
```
conda create -n MagicQuill python=3.10 -y
conda activate MagicQuill

```

  2. install torch with GPU support
```
pip install torch==2.1.2 torchvision==0.16.2 torchaudio==2.1.2 --index-url https://download.pytorch.org/whl/cu118

```

  3. install the interface
```
pip install gradio_magicquill-0.0.1-py3-none-any.whl

```

  4. install llava environment
```
(For Linux)
cp -f pyproject.toml MagicQuill/LLaVA/
pip install -e MagicQuill/LLaVA/

```

or
```
(For Windows)
copy /Y pyproject.toml MagicQuill\LLaVA\
pip install -e MagicQuill\LLaVA\

```

(For Windows PowerShell, the first line should be `Copy-Item -Path pyproject.toml -Destination "MagicQuill\LLaVA" -Force`)
  5. install the remaining environment
```
pip install -r requirements.txt

```

  6. run magicquill
```
python gradio_run.py

```

If you are mainland user, you may try `export HF_ENDPOINT=https://hf-mirror.com` to use huggingface mirror to facilitate the download of some necessary checkpoints to run our system.


## Docker Container
[](https://github.com/magic-quill/magicquill#docker-container)
You can build a docker container with MagicQuill as follows:
  1. git clone repo. **Please don't forget the`--recursive` flag.** Otherwise, you will find `LLaVA` submodule missing.
```
git clone --recursive https://github.com/magic-quill/MagicQuill.git
cd MagicQuill

```

  2. download and unzip checkpoints
```
wget -O models.zip "https://hkustconnect-my.sharepoint.com/:u:/g/personal/zliucz_connect_ust_hk/EWlGF0WfawJIrJ1Hn85_-3gB0MtwImAnYeWXuleVQcukMg?e=Gcjugg&download=1"
unzip models.zip

```

If the .zip file is not accessible, download it via browser. All checkpoints are about 25 GB in total. It may take some time to download. Alternatively, check our checkpoints at [huggingface](https://huggingface.co/LiuZichen/MagicQuill-models).
Note: these can be located anywhere on the host computer, but Docker Compose expects them to be in `/data/magicquill/models` by default. Update `docker-compose.yaml` if you unzip them to another location.
  3. build the image
```
docker compose build

```

  4. run the image
```
docker compose up -d

```



## Tutorial
[](https://github.com/magic-quill/magicquill#tutorial)
Please read before you try!
### I. Three type of magic quills
[](https://github.com/magic-quill/magicquill#i-three-type-of-magic-quills)
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/brush_edge_add.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/brush_edge_add.svg)
Use the **add brush** to add details and elements guided by prompts - express your ideas with your own lively strokes!
[![gif description](https://github.com/ant-research/MagicQuill/raw/main/docs/gifs/deer.gif)](https://github.com/ant-research/MagicQuill/blob/main/docs/gifs/deer.gif)
"With just a few strokes, a vivid little deer comes to life"
[![gif description](https://github.com/ant-research/MagicQuill/raw/main/docs/gifs/necklace.gif)](https://github.com/ant-research/MagicQuill/blob/main/docs/gifs/necklace.gif)
"Adorn the beautiful lady with a necklace"
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/brush_edge_remove.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/brush_edge_remove.svg)
The **subtract brush** can remove excess details or redraw areas based on prompts. If there's anything you're not satisfied with, just subtract it away!
[![gif description](https://github.com/ant-research/MagicQuill/raw/main/docs/gifs/dolphin.gif)](https://github.com/ant-research/MagicQuill/blob/main/docs/gifs/dolphin.gif)
"A dolphin with two tail fins? Let's give it a quick 'treatment'!"
[![gif description](https://github.com/ant-research/MagicQuill/raw/main/docs/gifs/skeleton cowboy.gif)](https://github.com/ant-research/MagicQuill/blob/main/docs/gifs/skeleton cowboy.gif)
"Let's take off Mr. Skeleton's hat and help him cool down."
[![add brush](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/brush_edge_add.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/brush_edge_add.svg)&[![minus brush](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/brush_edge_remove.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/brush_edge_remove.svg)
Combine the **add and subtract brushes** to create amazing combo effects!
[![gif description](https://github.com/ant-research/MagicQuill/raw/main/docs/gifs/mona lisa cat.gif)](https://github.com/ant-research/MagicQuill/blob/main/docs/gifs/mona lisa cat.gif)
"Let's give Mona Lisa a pet cat~"
[![gif description](https://github.com/ant-research/MagicQuill/raw/main/docs/gifs/handsome bowtie.gif)](https://github.com/ant-research/MagicQuill/blob/main/docs/gifs/handsome bowtie.gif)
"Let's give this handsome fellow a new tie!"
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/brush.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/brush.svg)
The **color brush** can precisely color the image, matching the color of your brush~
[![gif description](https://github.com/ant-research/MagicQuill/raw/main/docs/gifs/beautiful hair.gif)](https://github.com/ant-research/MagicQuill/blob/main/docs/gifs/beautiful hair.gif)
"Precise color highlighting - paint exactly where you want to color"
[![gif description](https://github.com/ant-research/MagicQuill/raw/main/docs/gifs/cake flowers.gif)](https://github.com/ant-research/MagicQuill/blob/main/docs/gifs/cake flowers.gif)
"Don't you think the blue flowers look more dreamy than the pink ones?"
*Please note the color brush and add&subtract brush are mutually exclusive - you can only use one at a time!
### II. Draw and Guess
[](https://github.com/magic-quill/magicquill#ii-draw-and-guess)
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/wand.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/wand.svg)
Our brush is super smart! Look at the examples above - as soon as you finish drawing, it quickly guesses what you want to create and fills in the prompts for you~ Sometimes it might guess wrong though, so feel free to tell it what you actually want to draw~
[![gif description](https://github.com/ant-research/MagicQuill/raw/main/docs/gifs/path.gif)](https://github.com/ant-research/MagicQuill/blob/main/docs/gifs/path.gif)
"Oops! I don't want to draw a vine, I want to create a path!"
### III. Super useful canvas tools!
[](https://github.com/magic-quill/magicquill#iii-super-useful-canvas-tools)
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/upload.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/upload.svg)
Click this button to upload the photo you want to edit~
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/eraser.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/eraser.svg)
Made a mistake with the brush? Just erase it with the rubber tool!
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/cursor.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/cursor.svg)
Drag, rotate, and resize your strokes with the cursor - just like when you're working in PowerPoint!
[![add brush](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/undo.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/undo.svg)&[![minus brush](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/redo.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/redo.svg)
Left is ctrl+z, right is ctrl+y - you know what that means! 😊And for Mac users, left is command+z, right is command+shift+z! 😝
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/delete.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/delete.svg)
Oops! That doesn't look right 😵 - click this trash bin to delete the stroke
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/eye.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/eye.svg)
The brush strokes are in my way, how can I see the image😡?! Try clicking this button to temporarily hide your strokes
[![add brush](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/accept.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/accept.svg)&[![minus brush](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/discard.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/discard.svg)
These two icons will appear after the image is generated...I love this generated image 😍, I want to keep editing! ➡️ Click ✅ to continue editingWhat is this thing 😡, I don't want to see it! ➡️ Click ❎ to discard the result
### IV. Notes
[](https://github.com/magic-quill/magicquill#iv-notes)
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/loading.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/loading.svg)
When you see the spinning icon in the bottom left corner, it means the magicquill is still charging up 💪 Wait for it to disappear before clicking the Run button!
[![SVG image](https://github.com/ant-research/MagicQuill/raw/main/docs/icons/wand.svg)](https://github.com/ant-research/MagicQuill/blob/main/docs/icons/wand.svg)
When the magic wand is flashing, our brush is working hard to guess what you're trying to draw 🤔 Please be patient! 🙏
### V. Parameters
[](https://github.com/magic-quill/magicquill#v-parameters)
If you've made it here, you must really love our work! 😍If you want to learn how to better control the generation results, don't miss this section! 😘Next to the Run button, you can select parameters to modify advanced settings 🧐
  * Base Model Name: Users can adjust this to select appropriate base models for different editing styles
    * [SD1.5/realisticVisionV60B1_v51VAE.safetensors](https://civitai.com/models/4201/realistic-vision-v60-b1): This generates realistic style images! Use this most of the time.
    * [SD1.5/DreamShaper.safetensors](https://civitai.com/models/4384?modelVersionId=128713): This one is for generating fantasy style images
    * [SD1.5/majicMIX_realistic](https://civitai.com/models/43331/majicmix-realistic): This one is good at generating portraits 👩
    * [SD1.5/MeinaMix.safetensors](https://civitai.com/models/7240?modelVersionId=948574): This one is good at generating anime images.
    * [SD1.5/ghostmix_v20Bakedvae.safetensors](https://civitai.com/models/36520/ghostmix): Another model for anime image generation.
    * If there are any models you'd like to add, contact us!
  * Negative Prompt: Users can input content they want the model to avoid generating. Whatever you don't want to generate, put it here.
  * Fine Edge: Users can enable this option to activate fine edge control.
  * Grow Size: Adjust this parameter to set the pixel range affected around brush strokes when editing images, to expand/reduce the brush stroke influence area.
  * Edge Strength: Parameter for adjusting the add/subtract brush control strength. Simply put, if you're confident in your drawing skills, you can increase strength. If you're a bad drawer like us 🤦, please keep the parameter as is, or reduce the strength a bit.
  * Color Strength: Parameter for adjusting the color brush control strength, can adjust the image's coloring effects.
  * The remaining parameters are just some common parameters for diffusion models! You basically don't need to manage these, but if you're in the industry/AI art expert, feel free to try adjusting them.


## Citation
[](https://github.com/magic-quill/magicquill#citation)
Don't forget to cite this source if it proves useful in your research!
```
@article{liu2024magicquill, 
	title={MagicQuill: An Intelligent Interactive Image Editing System}, 
	author={Zichen Liu and Yue Yu and Hao Ouyang and Qiuyu Wang and Ka Leong Cheng and Wen Wang and Zhiheng Liu and Qifeng Chen and Yujun Shen}, 
	year={2024}, 
	eprint={2411.09703}, 
	archivePrefix={arXiv}, 
	primaryClass={cs.CV}}
```

## Acknowledgement
[](https://github.com/magic-quill/magicquill#acknowledgement)
Our implementation is based on
  * [ComfyUI-BrushNet](https://github.com/nullquant/ComfyUI-BrushNet)
  * [ComfyUI](https://github.com/comfyanonymous/ComfyUI)
  * [LLaVA](https://github.com/haotian-liu/LLaVA)
  * [comfyui_controlnet_aux](https://github.com/Fannovel16/comfyui_controlnet_aux)
  * [ComfyUI_Custom_Nodes_AlekPet](https://github.com/AlekPet/ComfyUI_Custom_Nodes_AlekPet)
  * [fabric.js](https://github.com/fabricjs/fabric.js)


Thanks for their remarkable contribution and released code!
## Note
[](https://github.com/magic-quill/magicquill#note)
Note: This repo is governed by the license of CC BY-NC 4.0 We strongly advise users not to knowingly generate or allow others to knowingly generate harmful content, including hate speech, violence, pornography, deception, etc.
(注：本仓库受CC BY-NC的许可协议限制。我们强烈建议，用户不应传播及不应允许他人传播以下内容，包括但不限于仇恨言论、暴力、色情、欺诈相关的有害信息。)
## About
[CVPR'25] Official Implementations for Paper - MagicQuill: An Intelligent Interactive Image Editing System 
[magicquill.art](https://magicquill.art "https://magicquill.art")
### Topics
[ image-editing ](https://github.com/topics/image-editing "Topic: image-editing") [ gradio ](https://github.com/topics/gradio "Topic: gradio") [ aigc ](https://github.com/topics/aigc "Topic: aigc") [ mllm ](https://github.com/topics/mllm "Topic: mllm")
### Resources
[ Readme ](https://github.com/magic-quill/magicquill#readme-ov-file)
### License
[ View license ](https://github.com/magic-quill/magicquill#License-1-ov-file)
[ Activity](https://github.com/ant-research/MagicQuill/activity)
[ Custom properties](https://github.com/ant-research/MagicQuill/custom-properties)
### Stars
[ **3.2k** stars](https://github.com/ant-research/MagicQuill/stargazers)
### Watchers
[ **40** watching](https://github.com/ant-research/MagicQuill/watchers)
### Forks
[ **324** forks](https://github.com/ant-research/MagicQuill/forks)
[ Report repository ](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fant-research%2FMagicQuill&report=ant-research+%28user%29)
##  [Releases](https://github.com/ant-research/MagicQuill/releases)
No releases published
##  [Packages 0](https://github.com/orgs/ant-research/packages?repo_name=MagicQuill)
No packages published 
##  [Contributors 7](https://github.com/ant-research/MagicQuill/graphs/contributors)
  * [ ![@zliucz](https://avatars.githubusercontent.com/u/64915812?s=64&v=4) ](https://github.com/zliucz)
  * [ ![@bruceyyu](https://avatars.githubusercontent.com/u/33870780?s=64&v=4) ](https://github.com/bruceyyu)
  * [ ![@gbudge](https://avatars.githubusercontent.com/u/16557056?s=64&v=4) ](https://github.com/gbudge)
  * [ ![@qiuyu96](https://avatars.githubusercontent.com/u/44515536?s=64&v=4) ](https://github.com/qiuyu96)
  * [ ![@Johanan528](https://avatars.githubusercontent.com/u/56764880?s=64&v=4) ](https://github.com/Johanan528)
  * [ ![@ken-ouyang](https://avatars.githubusercontent.com/u/11994361?s=64&v=4) ](https://github.com/ken-ouyang)
  * [ ![@encounter1997](https://avatars.githubusercontent.com/u/30790888?s=64&v=4) ](https://github.com/encounter1997)


## Languages
  * [ Python 99.3% ](https://github.com/ant-research/MagicQuill/search?l=python)
  * Other 0.7%


## Footer
[ ](https://github.com "GitHub") © 2025 GitHub, Inc. 
### Footer navigation
  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com/)
  * [Contact](https://support.github.com?tags=dotcom-footer)
  * Manage cookies 
  * Do not share my personal information 


You can’t perform that action at this time. 
