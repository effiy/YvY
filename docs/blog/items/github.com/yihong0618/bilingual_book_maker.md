# 原始URL: https://github.com/yihong0618/bilingual_book_maker

# 抓取时间: 2025-03-30 21:14:54

[Skip to content](https://github.com/yihong0618/bilingual_book_maker#start-of-content)
## Navigation Menu
Toggle navigation
[ ](https://github.com/)
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fyihong0618%2Fbilingual_book_maker)
  * Product 
    * [ GitHub Copilot Write better code with AI  ](https://github.com/features/copilot)
    * [ Security Find and fix vulnerabilities  ](https://github.com/features/security)
    * [ Actions Automate any workflow  ](https://github.com/features/actions)
    * [ Codespaces Instant dev environments  ](https://github.com/features/codespaces)
    * [ Issues Plan and track work  ](https://github.com/features/issues)
    * [ Code Review Manage code changes  ](https://github.com/features/code-review)
    * [ Discussions Collaborate outside of code  ](https://github.com/features/discussions)
    * [ Code Search Find more, search less  ](https://github.com/features/code-search)
Explore
    * [ All features ](https://github.com/features)
    * [ Documentation ](https://docs.github.com)
    * [ GitHub Skills ](https://skills.github.com)
    * [ Blog ](https://github.blog)
  * Solutions 
By company size
    * [ Enterprises ](https://github.com/enterprise)
    * [ Small and medium teams ](https://github.com/team)
    * [ Startups ](https://github.com/enterprise/startups)
    * [ Nonprofits ](https://github.com/solutions/industry/nonprofits)
By use case
    * [ DevSecOps ](https://github.com/solutions/use-case/devsecops)
    * [ DevOps ](https://github.com/solutions/use-case/devops)
    * [ CI/CD ](https://github.com/solutions/use-case/ci-cd)
    * [ View all use cases ](https://github.com/solutions/use-case)
By industry
    * [ Healthcare ](https://github.com/solutions/industry/healthcare)
    * [ Financial services ](https://github.com/solutions/industry/financial-services)
    * [ Manufacturing ](https://github.com/solutions/industry/manufacturing)
    * [ Government ](https://github.com/solutions/industry/government)
    * [ View all industries ](https://github.com/solutions/industry)
[ View all solutions ](https://github.com/solutions)
  * Resources 
Topics
    * [ AI ](https://github.com/resources/articles/ai)
    * [ DevOps ](https://github.com/resources/articles/devops)
    * [ Security ](https://github.com/resources/articles/security)
    * [ Software Development ](https://github.com/resources/articles/software-development)
    * [ View all ](https://github.com/resources/articles)
Explore
    * [ Learning Pathways ](https://resources.github.com/learn/pathways)
    * [ Events & Webinars ](https://resources.github.com)
    * [ Ebooks & Whitepapers ](https://github.com/resources/whitepapers)
    * [ Customer Stories ](https://github.com/customer-stories)
    * [ Partners ](https://partner.github.com)
    * [ Executive Insights ](https://github.com/solutions/executive-insights)
  * Open Source 
    * [ GitHub Sponsors Fund open source developers  ](https://github.com/sponsors)
    * [ The ReadME Project GitHub community articles  ](https://github.com/readme)
Repositories
    * [ Topics ](https://github.com/topics)
    * [ Trending ](https://github.com/trending)
    * [ Collections ](https://github.com/collections)
  * Enterprise 
    * [ Enterprise platform AI-powered developer platform  ](https://github.com/enterprise)
Available add-ons
    * [ Advanced Security Enterprise-grade security features  ](https://github.com/enterprise/advanced-security)
    * [ Copilot for business Enterprise-grade AI features  ](https://github.com/features/copilot/copilot-business)
    * [ Premium Support Enterprise-grade 24/7 support  ](https://github.com/premium-support)
  * [Pricing](https://github.com/pricing)


Search or jump to...
# Search code, repositories, users, issues, pull requests...
Search 
Clear
[Search syntax tips](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax)
#  Provide feedback 
We read every piece of feedback, and take your input very seriously.
Include my email address so I can be contacted
Cancel  Submit feedback 
#  Saved searches 
## Use saved searches to filter your results more quickly
Name
Query
To see all available qualifiers, see our [documentation](https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax). 
Cancel  Create saved search 
[ Sign in ](https://github.com/login?return_to=https%3A%2F%2Fgithub.com%2Fyihong0618%2Fbilingual_book_maker)
[ Sign up ](https://github.com/signup?ref_cta=Sign+up&ref_loc=header+logged+out&ref_page=%2F%3Cuser-name%3E%2F%3Crepo-name%3E&source=header-repo&source_repo=yihong0618%2Fbilingual_book_maker) Reseting focus
You signed in with another tab or window. [Reload](https://github.com/yihong0618/bilingual_book_maker) to refresh your session. You signed out in another tab or window. [Reload](https://github.com/yihong0618/bilingual_book_maker) to refresh your session. You switched accounts on another tab or window. [Reload](https://github.com/yihong0618/bilingual_book_maker) to refresh your session. Dismiss alert
{{ message }}
[ yihong0618 ](https://github.com/yihong0618) / **[bilingual_book_maker](https://github.com/yihong0618/bilingual_book_maker) ** Public
  * [ Notifications ](https://github.com/login?return_to=%2Fyihong0618%2Fbilingual_book_maker) You must be signed in to change notification settings
  * [ Fork 1.1k ](https://github.com/login?return_to=%2Fyihong0618%2Fbilingual_book_maker)
  * [ Star  8.3k ](https://github.com/login?return_to=%2Fyihong0618%2Fbilingual_book_maker)


Make bilingual epub books Using AI translate 
### License
[ MIT license ](https://github.com/yihong0618/bilingual_book_maker/blob/main/LICENSE)
[ 8.3k stars ](https://github.com/yihong0618/bilingual_book_maker/stargazers) [ 1.1k forks ](https://github.com/yihong0618/bilingual_book_maker/forks) [ Branches ](https://github.com/yihong0618/bilingual_book_maker/branches) [ Tags ](https://github.com/yihong0618/bilingual_book_maker/tags) [ Activity ](https://github.com/yihong0618/bilingual_book_maker/activity)
[ Star  ](https://github.com/login?return_to=%2Fyihong0618%2Fbilingual_book_maker)
[ Notifications ](https://github.com/login?return_to=%2Fyihong0618%2Fbilingual_book_maker) You must be signed in to change notification settings
  * [ Code ](https://github.com/yihong0618/bilingual_book_maker)
  * [ Issues 124 ](https://github.com/yihong0618/bilingual_book_maker/issues)
  * [ Pull requests 8 ](https://github.com/yihong0618/bilingual_book_maker/pulls)
  * [ Discussions ](https://github.com/yihong0618/bilingual_book_maker/discussions)
  * [ Actions ](https://github.com/yihong0618/bilingual_book_maker/actions)
  * [ Projects 0 ](https://github.com/yihong0618/bilingual_book_maker/projects)
  * [ Security ](https://github.com/yihong0618/bilingual_book_maker/security)
  * [ Insights ](https://github.com/yihong0618/bilingual_book_maker/pulse)


Additional navigation options
  * [ Code  ](https://github.com/yihong0618/bilingual_book_maker)
  * [ Issues  ](https://github.com/yihong0618/bilingual_book_maker/issues)
  * [ Pull requests  ](https://github.com/yihong0618/bilingual_book_maker/pulls)
  * [ Discussions  ](https://github.com/yihong0618/bilingual_book_maker/discussions)
  * [ Actions  ](https://github.com/yihong0618/bilingual_book_maker/actions)
  * [ Projects  ](https://github.com/yihong0618/bilingual_book_maker/projects)
  * [ Security  ](https://github.com/yihong0618/bilingual_book_maker/security)
  * [ Insights  ](https://github.com/yihong0618/bilingual_book_maker/pulse)


# yihong0618/bilingual_book_maker
main
[Branches](https://github.com/yihong0618/bilingual_book_maker/branches)[Tags](https://github.com/yihong0618/bilingual_book_maker/tags)
[](https://github.com/yihong0618/bilingual_book_maker/branches)[](https://github.com/yihong0618/bilingual_book_maker/tags)
Go to file
Code
## Folders and files
Name| Name| Last commit message| Last commit date  
---|---|---|---  
## Latest commit
## History
[211 Commits](https://github.com/yihong0618/bilingual_book_maker/commits/main/)[](https://github.com/yihong0618/bilingual_book_maker/commits/main/)  
[.github/workflows](https://github.com/yihong0618/bilingual_book_maker/tree/main/.github/workflows "This path skips through empty directories")| [.github/workflows](https://github.com/yihong0618/bilingual_book_maker/tree/main/.github/workflows "This path skips through empty directories")  
[book_maker](https://github.com/yihong0618/bilingual_book_maker/tree/main/book_maker "book_maker")| [book_maker](https://github.com/yihong0618/bilingual_book_maker/tree/main/book_maker "book_maker")  
[docs](https://github.com/yihong0618/bilingual_book_maker/tree/main/docs "docs")| [docs](https://github.com/yihong0618/bilingual_book_maker/tree/main/docs "docs")  
[test_books](https://github.com/yihong0618/bilingual_book_maker/tree/main/test_books "test_books")| [test_books](https://github.com/yihong0618/bilingual_book_maker/tree/main/test_books "test_books")  
[tests](https://github.com/yihong0618/bilingual_book_maker/tree/main/tests "tests")| [tests](https://github.com/yihong0618/bilingual_book_maker/tree/main/tests "tests")  
[.dockerignore](https://github.com/yihong0618/bilingual_book_maker/blob/main/.dockerignore ".dockerignore")| [.dockerignore](https://github.com/yihong0618/bilingual_book_maker/blob/main/.dockerignore ".dockerignore")  
[.gitignore](https://github.com/yihong0618/bilingual_book_maker/blob/main/.gitignore ".gitignore")| [.gitignore](https://github.com/yihong0618/bilingual_book_maker/blob/main/.gitignore ".gitignore")  
[.pdm-python](https://github.com/yihong0618/bilingual_book_maker/blob/main/.pdm-python ".pdm-python")| [.pdm-python](https://github.com/yihong0618/bilingual_book_maker/blob/main/.pdm-python ".pdm-python")  
[Dockerfile](https://github.com/yihong0618/bilingual_book_maker/blob/main/Dockerfile "Dockerfile")| [Dockerfile](https://github.com/yihong0618/bilingual_book_maker/blob/main/Dockerfile "Dockerfile")  
[LICENSE](https://github.com/yihong0618/bilingual_book_maker/blob/main/LICENSE "LICENSE")| [LICENSE](https://github.com/yihong0618/bilingual_book_maker/blob/main/LICENSE "LICENSE")  
[Makefile](https://github.com/yihong0618/bilingual_book_maker/blob/main/Makefile "Makefile")| [Makefile](https://github.com/yihong0618/bilingual_book_maker/blob/main/Makefile "Makefile")  
[README-CN.md](https://github.com/yihong0618/bilingual_book_maker/blob/main/README-CN.md "README-CN.md")| [README-CN.md](https://github.com/yihong0618/bilingual_book_maker/blob/main/README-CN.md "README-CN.md")  
[README.md](https://github.com/yihong0618/bilingual_book_maker/blob/main/README.md "README.md")| [README.md](https://github.com/yihong0618/bilingual_book_maker/blob/main/README.md "README.md")  
[disclaimer.md](https://github.com/yihong0618/bilingual_book_maker/blob/main/disclaimer.md "disclaimer.md")| [disclaimer.md](https://github.com/yihong0618/bilingual_book_maker/blob/main/disclaimer.md "disclaimer.md")  
[make_book.py](https://github.com/yihong0618/bilingual_book_maker/blob/main/make_book.py "make_book.py")| [make_book.py](https://github.com/yihong0618/bilingual_book_maker/blob/main/make_book.py "make_book.py")  
[mkdocs.yml](https://github.com/yihong0618/bilingual_book_maker/blob/main/mkdocs.yml "mkdocs.yml")| [mkdocs.yml](https://github.com/yihong0618/bilingual_book_maker/blob/main/mkdocs.yml "mkdocs.yml")  
[pdm.lock](https://github.com/yihong0618/bilingual_book_maker/blob/main/pdm.lock "pdm.lock")| [pdm.lock](https://github.com/yihong0618/bilingual_book_maker/blob/main/pdm.lock "pdm.lock")  
[prompt_md.json](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_md.json "prompt_md.json")| [prompt_md.json](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_md.json "prompt_md.json")  
[prompt_md.prompt.md](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_md.prompt.md "prompt_md.prompt.md")| [prompt_md.prompt.md](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_md.prompt.md "prompt_md.prompt.md")  
[prompt_template_sample.json](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_template_sample.json "prompt_template_sample.json")| [prompt_template_sample.json](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_template_sample.json "prompt_template_sample.json")  
[prompt_template_sample.txt](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_template_sample.txt "prompt_template_sample.txt")| [prompt_template_sample.txt](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_template_sample.txt "prompt_template_sample.txt")  
[pyproject.toml](https://github.com/yihong0618/bilingual_book_maker/blob/main/pyproject.toml "pyproject.toml")| [pyproject.toml](https://github.com/yihong0618/bilingual_book_maker/blob/main/pyproject.toml "pyproject.toml")  
[requirements.txt](https://github.com/yihong0618/bilingual_book_maker/blob/main/requirements.txt "requirements.txt")| [requirements.txt](https://github.com/yihong0618/bilingual_book_maker/blob/main/requirements.txt "requirements.txt")  
[typos.toml](https://github.com/yihong0618/bilingual_book_maker/blob/main/typos.toml "typos.toml")| [typos.toml](https://github.com/yihong0618/bilingual_book_maker/blob/main/typos.toml "typos.toml")  
View all files  
## Repository files navigation
  * [README](https://github.com/yihong0618/bilingual_book_maker)
  * [MIT license](https://github.com/yihong0618/bilingual_book_maker)


**[中文](https://github.com/yihong0618/bilingual_book_maker/blob/main/README-CN.md) | English** [![litellm](https://camo.githubusercontent.com/7491d7604931464e0cf9ed8c5c26ba79bc9cba2b1083d6c65b235352a22087df/68747470733a2f2f696d672e736869656c64732e696f2f62616467652f2532302546302539462539412538352532306c6974654c4c4d2d4f70656e4149253743417a757265253743416e7468726f70696325374350616c6d253743436f686572652537435265706c696361746525374348756767696e67253230466163652d626c75653f636f6c6f723d677265656e)](https://github.com/BerriAI/litellm)
# bilingual_book_maker
[](https://github.com/yihong0618/bilingual_book_maker#bilingual_book_maker)
The bilingual_book_maker is an AI translation tool that uses ChatGPT to assist users in creating multi-language versions of epub/txt/srt files and books. This tool is exclusively designed for translating epub books that have entered the public domain and is not intended for copyrighted works. Before using this tool, please review the project's **[disclaimer](https://github.com/yihong0618/bilingual_book_maker/blob/main/disclaimer.md)**.
[![image](https://user-images.githubusercontent.com/15976103/222317531-a05317c5-4eee-49de-95cd-04063d9539d9.png)](https://user-images.githubusercontent.com/15976103/222317531-a05317c5-4eee-49de-95cd-04063d9539d9.png)
## Supported Models
[](https://github.com/yihong0618/bilingual_book_maker#supported-models)
gpt-4, gpt-3.5-turbo, claude-2, palm, llama-2, azure-openai, command-nightly, gemini For using Non-OpenAI models, use class `liteLLM()` - liteLLM supports all models above. Find more info here for using liteLLM: <https://github.com/BerriAI/litellm/blob/main/setup.py>
## Preparation
[](https://github.com/yihong0618/bilingual_book_maker#preparation)
  1. ChatGPT or OpenAI token [1](https://github.com/yihong0618/bilingual_book_maker#user-content-fn-token-a2095066e6cf6faf9dd5402dfcf1bce4)
  2. epub/txt books
  3. Environment with internet access or proxy
  4. Python 3.8+


## Quick Start
[](https://github.com/yihong0618/bilingual_book_maker#quick-start)
A sample book, `test_books/animal_farm.epub`, is provided for testing purposes.
```
pip install -r requirements.txt
python3 make_book.py --book_name test_books/animal_farm.epub --openai_key ${openai_key} --test
OR
pip install -U bbook_maker
bbook --book_name test_books/animal_farm.epub --openai_key ${openai_key} --test
```

## Translate Service
[](https://github.com/yihong0618/bilingual_book_maker#translate-service)
  * Use `--openai_key` option to specify OpenAI API key. If you have multiple keys, separate them by commas (xxx,xxx,xxx) to reduce errors caused by API call limits. Or, just set environment variable `BBM_OPENAI_API_KEY` instead.
  * A sample book, `test_books/animal_farm.epub`, is provided for testing purposes.
  * The default underlying model is [GPT-3.5-turbo](https://openai.com/blog/introducing-chatgpt-and-whisper-apis), which is used by ChatGPT currently. Use `--model gpt4` to change the underlying model to `GPT4`. You can also use `GPT4omini`.
  * Important to note that `gpt-4` is significantly more expensive than `gpt-4-turbo`, but to avoid bumping into rate limits, we automatically balance queries across `gpt-4-1106-preview`, `gpt-4`, `gpt-4-32k`, `gpt-4-0613`,`gpt-4-32k-0613`.
  * If you want to use a specific model alias with OpenAI (eg `gpt-4-1106-preview` or `gpt-3.5-turbo-0125`), you can use `--model openai --model_list gpt-4-1106-preview,gpt-3.5-turbo-0125`. `--model_list` takes a comma-separated list of model aliases.
  * If using chatgptapi, you can add `--use_context` to add a context paragraph to each passage sent to the model for translation (see below).


  * DeepL Support DeepL model [DeepL Translator](https://rapidapi.com/splintPRO/api/dpl-translator) need pay to get the token
```
python3 make_book.py --book_name test_books/animal_farm.epub --model deepl --deepl_key ${deepl_key}

```

  * DeepL free
```
python3 make_book.py --book_name test_books/animal_farm.epub --model deeplfree
```

  * [Claude](https://console.anthropic.com/docs)
Use [Claude](https://console.anthropic.com/docs) model to translate
```
python3 make_book.py --book_name test_books/animal_farm.epub --model claude --claude_key ${claude_key}
```

  * Google Translate
```
python3 make_book.py --book_name test_books/animal_farm.epub --model google
```

  * Caiyun Translate
```
python3 make_book.py --book_name test_books/animal_farm.epub --model caiyun --caiyun_key ${caiyun_key}
```

  * Gemini
Support Google [Gemini](https://aistudio.google.com/app/apikey) model, use `--model gemini` for Gemini Flash or `--model geminipro` for Gemini Pro. If you want to use a specific model alias with Gemini (eg `gemini-1.5-flash-002` or `gemini-1.5-flash-8b-exp-0924`), you can use `--model gemini --model_list gemini-1.5-flash-002,gemini-1.5-flash-8b-exp-0924`. `--model_list` takes a comma-separated list of model aliases.
```
python3 make_book.py --book_name test_books/animal_farm.epub --model gemini --gemini_key ${gemini_key}
```

  * [Tencent TranSmart](https://transmart.qq.com)
```
python3 make_book.py --book_name test_books/animal_farm.epub --model tencentransmart
```

  * [xAI](https://x.ai)
```
python3 make_book.py --book_name test_books/animal_farm.epub --model xai --xai_key ${xai_key}
```

  * [Ollama](https://github.com/ollama/ollama)
Support [Ollama](https://github.com/ollama/ollama) self-host models, If ollama server is not running on localhost, use `--api_base http://x.x.x.x:port/v1` to point to the ollama server address
```
python3 make_book.py --book_name test_books/animal_farm.epub --ollama_model ${ollama_model_name}
```

  * [groq](https://console.groq.com/keys)
GroqCloud currently supports models: you can find from [Supported Models](https://console.groq.com/docs/models)
```
python3 make_book.py --book_name test_books/animal_farm.epub --groq_key [your_key] --model groq --model_list llama3-8b-8192
```



## Use
[](https://github.com/yihong0618/bilingual_book_maker#use)
  * Once the translation is complete, a bilingual book named `${book_name}_bilingual.epub` would be generated.
  * If there are any errors or you wish to interrupt the translation by pressing `CTRL+C`. A book named `{book_name}_bilingual_temp.epub` would be generated. You can simply rename it to any desired name.


## Params
[](https://github.com/yihong0618/bilingual_book_maker#params)
  * `--test`:
Use `--test` option to preview the result if you haven't paid for the service. Note that there is a limit and it may take some time.
  * `--language`:
Set the target language like `--language "Simplified Chinese"`. Default target language is `"Simplified Chinese"`. Read available languages by helper message: `python make_book.py --help`
  * `--proxy`:
Use `--proxy` option to specify proxy server for internet access. Enter a string such as `http://127.0.0.1:7890`.
  * `--resume`:
Use `--resume` option to manually resume the process after an interruption.
```
python3 make_book.py --book_name test_books/animal_farm.epub --model google --resume
```

  * `--translate-tags`:
epub is made of html files. By default, we only translate contents in `<p>`. Use `--translate-tags` to specify tags need for translation. Use comma to separate multiple tags. For example: `--translate-tags h1,h2,h3,p,div`
  * `--book_from`:
Use `--book_from` option to specify e-reader type (Now only `kobo` is available), and use `--device_path` to specify the mounting point.
  * `--api_base`:
If you want to change api_base like using Cloudflare Workers, use `--api_base <URL>` to support it. **Note: the api url should be '`https://xxxx/v1` '. Quotation marks are required.**
  * `--allow_navigable_strings`:
If you want to translate strings in an e-book that aren't labeled with any tags, you can use the `--allow_navigable_strings` parameter. This will add the strings to the translation queue. **Note that it's best to look for e-books that are more standardized if possible.**
  * `--prompt`:
To tweak the prompt, use the `--prompt` parameter. Valid placeholders for the `user` role template include `{text}` and `{language}`. It supports a few ways to configure the prompt:
    * If you don't need to set the `system` role content, you can simply set it up like this: `--prompt "Translate {text} to {language}."` or `--prompt prompt_template_sample.txt` (example of a text file can be found at [./prompt_template_sample.txt](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_template_sample.txt)).
    * If you need to set the `system` role content, you can use the following format: `--prompt '{"user":"Translate {text} to {language}", "system": "You are a professional translator."}'` or `--prompt prompt_template_sample.json` (example of a JSON file can be found at [./prompt_template_sample.json](https://github.com/yihong0618/bilingual_book_maker/blob/main/prompt_template_sample.json)).
    * You can now use [PromptDown](https://github.com/btfranklin/promptdown) format (`.md` files) for more structured prompts: `--prompt prompt_md.prompt.md`. PromptDown supports both traditional system messages and developer messages (used by newer AI models). Example:
```
# Translation Prompt
## Developer Message
You are a professional translator who specializes in accurate translations.
## Conversation
| Role | Content                      |
|-------|---------------------------------------------------|
| User | Please translate the following text into {language}:\n\n{text} |
```

    * You can also set the `user` and `system` role prompt by setting environment variables: `BBM_CHATGPTAPI_USER_MSG_TEMPLATE` and `BBM_CHATGPTAPI_SYS_MSG`.
  * `--batch_size`:
Use the `--batch_size` parameter to specify the number of lines for batch translation (default is 10, currently only effective for txt files).
  * `--accumulated_num`:
Wait for how many tokens have been accumulated before starting the translation. gpt3.5 limits the total_token to 4090. For example, if you use `--accumulated_num 1600`, maybe openai will output 2200 tokens and maybe 200 tokens for other messages in the system messages user messages, 1600+2200+200=4000, So you are close to reaching the limit. You have to choose your own value, there is no way to know if the limit is reached before sending
  * `--use_context`:
prompts the model to create a three-paragraph summary. If it's the beginning of the translation, it will summarize the entire passage sent (the size depending on `--accumulated_num`). For subsequent passages, it will amend the summary to include details from the most recent passage, creating a running one-paragraph context payload of the important details of the entire translated work. This improves consistency of flow and tone throughout the translation. This option is available for all ChatGPT-compatible models and Gemini models.
  * `--context_paragraph_limit`:
Use `--context_paragraph_limit` to set a limit on the number of context paragraphs when using the `--use_context` option.
  * `--temperature`:
Use `--temperature` to set the temperature parameter for `chatgptapi`/`gpt4`/`claude` models. For example: `--temperature 0.7`.
  * `--block_size`:
Use `--block_size` to merge multiple paragraphs into one block. This may increase accuracy and speed up the process but can disturb the original format. Must be used with `--single_translate`. For example: `--block_size 5 --single_translate`.
  * `--single_translate`:
Use `--single_translate` to output only the translated book without creating a bilingual version.
  * `--translation_style`:
example: `--translation_style "color: #808080; font-style: italic;"`
  * `--retranslate "$translated_filepath" "file_name_in_epub" "start_str" "end_str"(optional)`:
Retranslate from start_str to end_str's tag:
```
python3 "make_book.py" --book_name "test_books/animal_farm.epub" --retranslate 'test_books/animal_farm_bilingual.epub' 'index_split_002.html' 'in spite of the present book shortage which' 'This kind of thing is not a good symptom. Obviously'
```

Retranslate start_str's tag:
```
python3 "make_book.py" --book_name "test_books/animal_farm.epub" --retranslate 'test_books/animal_farm_bilingual.epub' 'index_split_002.html' 'in spite of the present book shortage which'
```



### Examples
[](https://github.com/yihong0618/bilingual_book_maker#examples)
**Note if use`pip install bbook_maker` all commands can change to `bbook_maker args`**
```
# Test quickly
python3 make_book.py --book_name test_books/animal_farm.epub --openai_key ${openai_key} --test --language zh-hans
# Test quickly for src
python3 make_book.py --book_name test_books/Lex_Fridman_episode_322.srt --openai_key ${openai_key} --test
# Or translate the whole book
python3 make_book.py --book_name test_books/animal_farm.epub --openai_key ${openai_key} --language zh-hans
# Or translate the whole book using Gemini flash
python3 make_book.py --book_name test_books/animal_farm.epub --gemini_key ${gemini_key} --model gemini
# Use a specific list of Gemini model aliases
python3 make_book.py --book_name test_books/animal_farm.epub --gemini_key ${gemini_key} --model gemini --model_list gemini-1.5-flash-002,gemini-1.5-flash-8b-exp-0924
# Set env OPENAI_API_KEY to ignore option --openai_key
export OPENAI_API_KEY=${your_api_key}
# Use the GPT-4 model with context to Japanese
python3 make_book.py --book_name test_books/animal_farm.epub --model gpt4 --use_context --language ja
# Use a specific OpenAI model alias
python3 make_book.py --book_name test_books/animal_farm.epub --model openai --model_list gpt-4-1106-preview --openai_key ${openai_key}
**Note** you can use other `openai like` model in this way
python3 make_book.py --book_name test_books/animal_farm.epub --model openai --model_list yi-34b-chat-0205 --openai_key ${openai_key} --api_base "https://api.lingyiwanwu.com/v1"
# Use a specific list of OpenAI model aliases
python3 make_book.py --book_name test_books/animal_farm.epub --model openai --model_list gpt-4-1106-preview,gpt-4-0125-preview,gpt-3.5-turbo-0125 --openai_key ${openai_key}
# Use the DeepL model with Japanese
python3 make_book.py --book_name test_books/animal_farm.epub --model deepl --deepl_key ${deepl_key} --language ja
# Use the Claude model with Japanese
python3 make_book.py --book_name test_books/animal_farm.epub --model claude --claude_key ${claude_key} --language ja
# Use the CustomAPI model with Japanese
python3 make_book.py --book_name test_books/animal_farm.epub --model customapi --custom_api ${custom_api} --language ja
# Translate contents in <div> and <p>
python3 make_book.py --book_name test_books/animal_farm.epub --translate-tags div,p
# Tweaking the prompt
python3 make_book.py --book_name test_books/animal_farm.epub --prompt prompt_template_sample.txt
# or
python3 make_book.py --book_name test_books/animal_farm.epub --prompt prompt_template_sample.json
# or
python3 make_book.py --book_name test_books/animal_farm.epub --prompt "Please translate \`{text}\` to {language}"
# Translate books download from Rakuten Kobo on kobo e-reader
python3 make_book.py --book_from kobo --device_path /tmp/kobo
# translate txt file
python3 make_book.py --book_name test_books/the_little_prince.txt --test --language zh-hans
# aggregated translation txt file
python3 make_book.py --book_name test_books/the_little_prince.txt --test --batch_size 20
# Using Caiyun model to translate
# (the api currently only support: simplified chinese <-> english, simplified chinese <-> japanese)
# the official Caiyun has provided a test token (3975l6lr5pcbvidl6jl2)
# you can apply your own token by following this tutorial(https://bobtranslate.com/service/translate/caiyun.html)
python3 make_book.py --model caiyun --caiyun_key 3975l6lr5pcbvidl6jl2 --book_name test_books/animal_farm.epub

# Set env BBM_CAIYUN_API_KEY to ignore option --openai_key
export BBM_CAIYUN_API_KEY=${your_api_key}

```

More understandable example
```
python3 make_book.py --book_name 'animal_farm.epub' --openai_key sk-XXXXX --api_base 'https://xxxxx/v1'
# Or python3 is not in your PATH
python make_book.py --book_name 'animal_farm.epub' --openai_key sk-XXXXX --api_base 'https://xxxxx/v1'
```

Microsoft Azure Endpoints
```
python3 make_book.py --book_name 'animal_farm.epub' --openai_key XXXXX --api_base 'https://example-endpoint.openai.azure.com' --deployment_id 'deployment-name'
# Or python3 is not in your PATH
python make_book.py --book_name 'animal_farm.epub' --openai_key XXXXX --api_base 'https://example-endpoint.openai.azure.com' --deployment_id 'deployment-name'
```

## Docker
[](https://github.com/yihong0618/bilingual_book_maker#docker)
You can use [Docker](https://www.docker.com/) if you don't want to deal with setting up the environment.
```
# Build image
docker build --tag bilingual_book_maker .
# Run container
# "$folder_path" represents the folder where your book file locates. Also, it is where the processed file will be stored.
# Windows PowerShell
$folder_path=your_folder_path # $folder_path="C:\Users\user\mybook\"
$book_name=your_book_name # $book_name="animal_farm.epub"
$openai_key=your_api_key # $openai_key="sk-xxx"
$language=your_language # see utils.py
docker run --rm --name bilingual_book_maker --mount type=bind,source=$folder_path,target='/app/test_books' bilingual_book_maker --book_name "/app/test_books/$book_name" --openai_key $openai_key --language $language
# Linux
export folder_path=${your_folder_path}
export book_name=${your_book_name}
export openai_key=${your_api_key}
export language=${your_language}
docker run --rm --name bilingual_book_maker --mount type=bind,source=${folder_path},target='/app/test_books' bilingual_book_maker --book_name "/app/test_books/${book_name}" --openai_key ${openai_key} --language "${language}"
```

For example:
```
# Linux
docker run --rm --name bilingual_book_maker --mount type=bind,source=/home/user/my_books,target='/app/test_books' bilingual_book_maker --book_name /app/test_books/animal_farm.epub --openai_key sk-XXX --test --test_num 1 --language zh-hant
```

## Notes
[](https://github.com/yihong0618/bilingual_book_maker#notes)
  1. API token from free trial has limit. If you want to speed up the process, consider paying for the service or use multiple OpenAI tokens
  2. PR is welcome


# Thanks
[](https://github.com/yihong0618/bilingual_book_maker#thanks)
  * @[yetone](https://github.com/yetone)


# Contribution
[](https://github.com/yihong0618/bilingual_book_maker#contribution)
  * Any issues or PRs are welcome.
  * TODOs in the issue can also be selected.
  * Please run `black make_book.py`[2](https://github.com/yihong0618/bilingual_book_maker#user-content-fn-black-a2095066e6cf6faf9dd5402dfcf1bce4) before submitting the code.


# Others better
[](https://github.com/yihong0618/bilingual_book_maker#others-better)
  * 书译 iOS -> [AI 全书翻译工具](https://apps.apple.com/cn/app/%E4%B9%A6%E8%AF%91-ai-%E5%85%A8%E4%B9%A6%E7%BF%BB%E8%AF%91%E5%B7%A5%E5%85%B7/id6447665417)


## Appreciation
[](https://github.com/yihong0618/bilingual_book_maker#appreciation)
Thank you, that's enough.
[![image](https://user-images.githubusercontent.com/15976103/222407199-1ed8930c-13a8-402b-9993-aaac8ee84744.png)](https://user-images.githubusercontent.com/15976103/222407199-1ed8930c-13a8-402b-9993-aaac8ee84744.png)
## Footnotes
  1. <https://platform.openai.com/account/api-keys> [↩](https://github.com/yihong0618/bilingual_book_maker#user-content-fnref-token-a2095066e6cf6faf9dd5402dfcf1bce4)
  2. <https://github.com/psf/black> [↩](https://github.com/yihong0618/bilingual_book_maker#user-content-fnref-black-a2095066e6cf6faf9dd5402dfcf1bce4)


## About
Make bilingual epub books Using AI translate 
### Resources
[ Readme ](https://github.com/yihong0618/bilingual_book_maker#readme-ov-file)
### License
[ MIT license ](https://github.com/yihong0618/bilingual_book_maker#MIT-1-ov-file)
[ Activity](https://github.com/yihong0618/bilingual_book_maker/activity)
### Stars
[ **8.3k** stars](https://github.com/yihong0618/bilingual_book_maker/stargazers)
### Watchers
[ **53** watching](https://github.com/yihong0618/bilingual_book_maker/watchers)
### Forks
[ **1.1k** forks](https://github.com/yihong0618/bilingual_book_maker/forks)
[ Report repository ](https://github.com/contact/report-content?content_url=https%3A%2F%2Fgithub.com%2Fyihong0618%2Fbilingual_book_maker&report=yihong0618+%28user%29)
##  [Releases 5](https://github.com/yihong0618/bilingual_book_maker/releases)
[ release v0.9.8 Latest  Nov 6, 2024 ](https://github.com/yihong0618/bilingual_book_maker/releases/tag/v0.9.8)
[+ 4 releases](https://github.com/yihong0618/bilingual_book_maker/releases)
##  [Packages 0](https://github.com/users/yihong0618/packages?repo_name=bilingual_book_maker)
No packages published 
##  [Contributors 64](https://github.com/yihong0618/bilingual_book_maker/graphs/contributors)
  * [ ![@yihong0618](https://avatars.githubusercontent.com/u/15976103?s=64&v=4) ](https://github.com/yihong0618)
  * [ ![@hleft](https://avatars.githubusercontent.com/u/89069008?s=64&v=4) ](https://github.com/hleft)
  * [ ![@mkXultra](https://avatars.githubusercontent.com/u/34665721?s=64&v=4) ](https://github.com/mkXultra)
  * [ ![@doggy8088](https://avatars.githubusercontent.com/u/88981?s=64&v=4) ](https://github.com/doggy8088)
  * [ ![@jeffery9](https://avatars.githubusercontent.com/u/1404460?s=64&v=4) ](https://github.com/jeffery9)
  * [ ![@cangming](https://avatars.githubusercontent.com/u/4612664?s=64&v=4) ](https://github.com/cangming)
  * [ ![@typebrook](https://avatars.githubusercontent.com/u/19887090?s=64&v=4) ](https://github.com/typebrook)
  * [ ![@Brikarl](https://avatars.githubusercontent.com/u/28230530?s=64&v=4) ](https://github.com/Brikarl)
  * [ ![@umm233](https://avatars.githubusercontent.com/u/32997707?s=64&v=4) ](https://github.com/umm233)
  * [ ![@YYLIZH](https://avatars.githubusercontent.com/u/48501277?s=64&v=4) ](https://github.com/YYLIZH)
  * [ ![@InzamZ](https://avatars.githubusercontent.com/u/73429001?s=64&v=4) ](https://github.com/InzamZ)
  * [ ![@cce](https://avatars.githubusercontent.com/u/51567?s=64&v=4) ](https://github.com/cce)
  * [ ![@xyb](https://avatars.githubusercontent.com/u/153287?s=64&v=4) ](https://github.com/xyb)
  * [ ![@zstone12](https://avatars.githubusercontent.com/u/28105615?s=64&v=4) ](https://github.com/zstone12)


[+ 50 contributors](https://github.com/yihong0618/bilingual_book_maker/graphs/contributors)
## Languages
  * [ Python 99.8% ](https://github.com/yihong0618/bilingual_book_maker/search?l=python)
  * Other 0.2%


## Footer
[ ](https://github.com "GitHub") © 2025 GitHub, Inc. 
### Footer navigation
  * [Terms](https://docs.github.com/site-policy/github-terms/github-terms-of-service)
  * [Privacy](https://docs.github.com/site-policy/privacy-policies/github-privacy-statement)
  * [Security](https://github.com/security)
  * [Status](https://www.githubstatus.com/)
  * [Docs](https://docs.github.com/)
  * [Contact](https://support.github.com?tags=dotcom-footer)
  * Manage cookies 
  * Do not share my personal information 


You can’t perform that action at this time. 
